<!DOCTYPE html>
<!--[if IE 8]>
<html id="ie8" dir="ltr" lang="zh-CN"
	prefix="og: https://ogp.me/ns#" >
<![endif]-->
<!--[if !(IE 8) ]><!-->
<html dir="ltr" lang="zh-CN" prefix="og: https://ogp.me/ns#">
<!--<![endif]-->
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width" />
<link rel="profile" href="https://gmpg.org/xfn/11" />
<link rel="pingback" href="https://coolshell.cn/xmlrpc.php" />
<link rel="shortcut icon" href="/favicon.png">
<title>vfork 挂掉的一个问题 | 酷 壳 - CoolShell</title>

<meta name="robots" content="max-image-preview:large" />
<meta name="keywords" content="fork,linux,unix,vfork,c/c++语言,unix/linux,操作系统" />
<link rel="canonical" href="/articles/12103.html" />
<meta name="generator" content="All in One SEO (AIOSEO) 4.3.6.1 " />
<meta property="og:locale" content="zh_CN" />
<meta property="og:site_name" content="酷 壳 - CoolShell" />
<meta property="og:type" content="activity" />
<meta property="og:title" content="vfork 挂掉的一个问题 | 酷 壳 - CoolShell" />
<meta property="og:url" content="/articles/12103.html" />
<meta property="og:image" content="/wp-content/uploads/2014/11/tux-fork.gif" />
<meta property="og:image:secure_url" content="/wp-content/uploads/2014/11/tux-fork.gif" />
<meta property="og:image:width" content="320" />
<meta property="og:image:height" content="322" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="vfork 挂掉的一个问题 | 酷 壳 - CoolShell" />
<meta name="twitter:image" content="/wp-content/uploads/2014/11/tux-fork.gif" />
<script type="application/ld+json" class="aioseo-schema">
			{"@context":"https:\/\/schema.org","@graph":[{"@type":"Article","@id":"https:\/\/coolshell.cn\/articles\/12103.html#article","name":"vfork \u6302\u6389\u7684\u4e00\u4e2a\u95ee\u9898 | \u9177 \u58f3 - CoolShell","headline":"vfork \u6302\u6389\u7684\u4e00\u4e2a\u95ee\u9898","author":{"@id":"https:\/\/coolshell.cn\/articles\/author\/haoel#author"},"publisher":{"@id":"https:\/\/coolshell.cn\/#organization"},"image":{"@type":"ImageObject","url":"https:\/\/coolshell.cn\/wp-content\/uploads\/2014\/11\/tux-fork.gif","@id":"https:\/\/coolshell.cn\/#articleImage","width":320,"height":322},"datePublished":"2014-11-20T16:48:27+08:00","dateModified":"2016-12-25T02:54:57+08:00","inLanguage":"zh-CN","commentCount":46,"mainEntityOfPage":{"@id":"https:\/\/coolshell.cn\/articles\/12103.html#webpage"},"isPartOf":{"@id":"https:\/\/coolshell.cn\/articles\/12103.html#webpage"},"articleSection":"C\/C++\u8bed\u8a00, Unix\/Linux, \u64cd\u4f5c\u7cfb\u7edf, fork, Linux, Unix, vfork"},{"@type":"BreadcrumbList","@id":"https:\/\/coolshell.cn\/articles\/12103.html#breadcrumblist","itemListElement":[{"@type":"ListItem","@id":"https:\/\/coolshell.cn\/#listItem","position":1,"item":{"@type":"WebPage","@id":"https:\/\/coolshell.cn\/","name":"\u4e3b\u9801","description":"\u4eab\u53d7\u7f16\u7a0b\u548c\u6280\u672f\u6240\u5e26\u6765\u7684\u5feb\u4e50 \u2013 https:\/\/coolshell.cn","url":"https:\/\/coolshell.cn\/"}}]},{"@type":"Organization","@id":"https:\/\/coolshell.cn\/#organization","name":"\u9177\u58f3-CoolShell","url":"https:\/\/coolshell.cn\/","logo":{"@type":"ImageObject","url":"https:\/\/coolshell.cn\/wp-content\/uploads\/2020\/04\/mini.logo_.png","@id":"https:\/\/coolshell.cn\/#organizationLogo","width":306,"height":306},"image":{"@id":"https:\/\/coolshell.cn\/#organizationLogo"}},{"@type":"Person","@id":"https:\/\/coolshell.cn\/articles\/author\/haoel#author","url":"https:\/\/coolshell.cn\/articles\/author\/haoel","name":"\u9648\u7693","image":{"@type":"ImageObject","@id":"https:\/\/coolshell.cn\/articles\/12103.html#authorImage","url":"https:\/\/secure.gravatar.com\/avatar\/af2fbb7372dd5826e44d87e6ceccea40?s=96&d=mm&r=g","width":96,"height":96,"caption":"\u9648\u7693"}},{"@type":"WebPage","@id":"https:\/\/coolshell.cn\/articles\/12103.html#webpage","url":"https:\/\/coolshell.cn\/articles\/12103.html","name":"vfork \u6302\u6389\u7684\u4e00\u4e2a\u95ee\u9898 | \u9177 \u58f3 - CoolShell","inLanguage":"zh-CN","isPartOf":{"@id":"https:\/\/coolshell.cn\/#website"},"breadcrumb":{"@id":"https:\/\/coolshell.cn\/articles\/12103.html#breadcrumblist"},"author":{"@id":"https:\/\/coolshell.cn\/articles\/author\/haoel#author"},"creator":{"@id":"https:\/\/coolshell.cn\/articles\/author\/haoel#author"},"datePublished":"2014-11-20T16:48:27+08:00","dateModified":"2016-12-25T02:54:57+08:00"},{"@type":"WebSite","@id":"https:\/\/coolshell.cn\/#website","url":"https:\/\/coolshell.cn\/","name":"\u9177 \u58f3 - CoolShell","description":"\u4eab\u53d7\u7f16\u7a0b\u548c\u6280\u672f\u6240\u5e26\u6765\u7684\u5feb\u4e50 - Coding Your Ambition","inLanguage":"zh-CN","publisher":{"@id":"https:\/\/coolshell.cn\/#organization"}}]}
		</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-X07ZBQJ84C"></script>

<link rel="dns-prefetch" href="//fonts.googleapis.com" />
<link rel="alternate" type="application/rss+xml" title="酷 壳 - CoolShell &raquo; Feed" href="https://coolshell.cn/feed" />
<link rel="alternate" type="application/rss+xml" title="酷 壳 - CoolShell &raquo; 评论Feed" href="https://coolshell.cn/comments/feed" />
<link rel="alternate" type="application/rss+xml" title="酷 壳 - CoolShell &raquo; vfork 挂掉的一个问题评论Feed" href="/articles/12103.html/feed" />
<script type="797e857a7a81bcd33e8becce-text/javascript">
window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/14.0.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/14.0.0\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/coolshell.cn\/wp-includes\/js\/wp-emoji-release.min.js?ver=6.2"}};
/*! This file is auto-generated */
!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){p.clearRect(0,0,i.width,i.height),p.fillText(e,0,0);e=i.toDataURL();return p.clearRect(0,0,i.width,i.height),p.fillText(t,0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(p&&p.fillText)switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s("\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f","\ud83c\udff3\ufe0f\u200b\u26a7\ufe0f")?!1:!s("\ud83c\uddfa\ud83c\uddf3","\ud83c\uddfa\u200b\ud83c\uddf3")&&!s("\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f","\ud83c\udff4\u200b\udb40\udc67\u200b\udb40\udc62\u200b\udb40\udc65\u200b\udb40\udc6e\u200b\udb40\udc67\u200b\udb40\udc7f");case"emoji":return!s("\ud83e\udef1\ud83c\udffb\u200d\ud83e\udef2\ud83c\udfff","\ud83e\udef1\ud83c\udffb\u200b\ud83e\udef2\ud83c\udfff")}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(e=t.source||{}).concatemoji?c(e.concatemoji):e.wpemoji&&e.twemoji&&(c(e.twemoji),c(e.wpemoji)))}(window,document,window._wpemojiSettings);
</script>
<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 0.07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel="stylesheet" id="series_font-css" href="/wp-content/plugins/simple-post-series/inc/icomoon/style.css?ver=2.4" type="text/css" media="all" />
<link rel="stylesheet" id="wp-block-library-css" href="/wp-content/plugins/gutenberg/build/block-library/style.css?ver=15.7.0" type="text/css" media="all" />
<link rel="stylesheet" id="classic-theme-styles-css" href="/wp-includes/css/classic-themes.min.css?ver=6.2" type="text/css" media="all" />
<style id="global-styles-inline-css" type="text/css">
body{--wp--preset--color--black: #000000;--wp--preset--color--cyan-bluish-gray: #abb8c3;--wp--preset--color--white: #ffffff;--wp--preset--color--pale-pink: #f78da7;--wp--preset--color--vivid-red: #cf2e2e;--wp--preset--color--luminous-vivid-orange: #ff6900;--wp--preset--color--luminous-vivid-amber: #fcb900;--wp--preset--color--light-green-cyan: #7bdcb5;--wp--preset--color--vivid-green-cyan: #00d084;--wp--preset--color--pale-cyan-blue: #8ed1fc;--wp--preset--color--vivid-cyan-blue: #0693e3;--wp--preset--color--vivid-purple: #9b51e0;--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%);--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%);--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%);--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);--wp--preset--font-size--small: 13px;--wp--preset--font-size--medium: 20px;--wp--preset--font-size--large: 36px;--wp--preset--font-size--x-large: 42px;--wp--preset--spacing--20: 0.44rem;--wp--preset--spacing--30: 0.67rem;--wp--preset--spacing--40: 1rem;--wp--preset--spacing--50: 1.5rem;--wp--preset--spacing--60: 2.25rem;--wp--preset--spacing--70: 3.38rem;--wp--preset--spacing--80: 5.06rem;--wp--preset--shadow--natural: 6px 6px 9px rgba(0, 0, 0, 0.2);--wp--preset--shadow--deep: 12px 12px 50px rgba(0, 0, 0, 0.4);--wp--preset--shadow--sharp: 6px 6px 0px rgba(0, 0, 0, 0.2);--wp--preset--shadow--outlined: 6px 6px 0px -3px rgba(255, 255, 255, 1), 6px 6px rgba(0, 0, 0, 1);--wp--preset--shadow--crisp: 6px 6px 0px rgba(0, 0, 0, 1);}:where(.is-layout-flex){gap: 0.5em;}body .is-layout-flow > .alignleft{float: left;margin-inline-start: 0;margin-inline-end: 2em;}body .is-layout-flow > .alignright{float: right;margin-inline-start: 2em;margin-inline-end: 0;}body .is-layout-flow > .aligncenter{margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > .alignleft{float: left;margin-inline-start: 0;margin-inline-end: 2em;}body .is-layout-constrained > .alignright{float: right;margin-inline-start: 2em;margin-inline-end: 0;}body .is-layout-constrained > .aligncenter{margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > :where(:not(.alignleft):not(.alignright):not(.alignfull)){max-width: var(--wp--style--global--content-size);margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > .alignwide{max-width: var(--wp--style--global--wide-size);}body .is-layout-flex{display: flex;}body .is-layout-flex{flex-wrap: wrap;align-items: center;}body .is-layout-flex > *{margin: 0;}body .is-layout-grid{display: grid;}body .is-layout-grid > *{margin: 0;}:where(.wp-block-columns.is-layout-flex){gap: 2em;}.has-black-color{color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-color{color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-color{color: var(--wp--preset--color--white) !important;}.has-pale-pink-color{color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-color{color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-color{color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-color{color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-color{color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-color{color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-color{color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-color{color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-color{color: var(--wp--preset--color--vivid-purple) !important;}.has-black-background-color{background-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-background-color{background-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-background-color{background-color: var(--wp--preset--color--white) !important;}.has-pale-pink-background-color{background-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-background-color{background-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-background-color{background-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-background-color{background-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-background-color{background-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-background-color{background-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-background-color{background-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-background-color{background-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-background-color{background-color: var(--wp--preset--color--vivid-purple) !important;}.has-black-border-color{border-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-border-color{border-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-border-color{border-color: var(--wp--preset--color--white) !important;}.has-pale-pink-border-color{border-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-border-color{border-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-border-color{border-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-border-color{border-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-border-color{border-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-border-color{border-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-border-color{border-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-border-color{border-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-border-color{border-color: var(--wp--preset--color--vivid-purple) !important;}.has-vivid-cyan-blue-to-vivid-purple-gradient-background{background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;}.has-light-green-cyan-to-vivid-green-cyan-gradient-background{background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;}.has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;}.has-luminous-vivid-orange-to-vivid-red-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;}.has-very-light-gray-to-cyan-bluish-gray-gradient-background{background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;}.has-cool-to-warm-spectrum-gradient-background{background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;}.has-blush-light-purple-gradient-background{background: var(--wp--preset--gradient--blush-light-purple) !important;}.has-blush-bordeaux-gradient-background{background: var(--wp--preset--gradient--blush-bordeaux) !important;}.has-luminous-dusk-gradient-background{background: var(--wp--preset--gradient--luminous-dusk) !important;}.has-pale-ocean-gradient-background{background: var(--wp--preset--gradient--pale-ocean) !important;}.has-electric-grass-gradient-background{background: var(--wp--preset--gradient--electric-grass) !important;}.has-midnight-gradient-background{background: var(--wp--preset--gradient--midnight) !important;}.has-small-font-size{font-size: var(--wp--preset--font-size--small) !important;}.has-medium-font-size{font-size: var(--wp--preset--font-size--medium) !important;}.has-large-font-size{font-size: var(--wp--preset--font-size--large) !important;}.has-x-large-font-size{font-size: var(--wp--preset--font-size--x-large) !important;}
:where(.wp-block-columns.is-layout-flex){gap: 2em;}
.wp-block-pullquote{font-size: 1.5em;line-height: 1.6;}
.wp-block-navigation a:where(:not(.wp-element-button)){color: inherit;}
</style>
<link rel="stylesheet" id="wp-postratings-css" href="/wp-content/plugins/wp-postratings/css/postratings-css.css?ver=1.90.1" type="text/css" media="all" />
<link rel="stylesheet" id="wp-pagenavi-css" href="/wp-content/plugins/wp-pagenavi/pagenavi-css.css?ver=2.70" type="text/css" media="all" />
<link rel="stylesheet" id="ez-toc-css" href="/wp-content/plugins/easy-table-of-contents/assets/css/screen.min.css?ver=2.0.48" type="text/css" media="all" />
<style id="ez-toc-inline-css" type="text/css">
div#ez-toc-container p.ez-toc-title {font-size: 120%;}div#ez-toc-container p.ez-toc-title {font-weight: 500;}div#ez-toc-container ul li {font-size: 95%;}div#ez-toc-container nav ul ul li ul li {font-size: %!important;}
.ez-toc-container-direction {direction: ltr;}.ez-toc-counter ul{counter-reset: item;}.ez-toc-counter nav ul li a::before {content: counters(item, ".", decimal) ". ";display: inline-block;counter-increment: item;flex-grow: 0;flex-shrink: 0;margin-right: .2em; float: left;}.ez-toc-widget-direction {direction: ltr;}.ez-toc-widget-container ul{counter-reset: item;}.ez-toc-widget-container nav ul li a::before {content: counters(item, ".", decimal) ". ";display: inline-block;counter-increment: item;flex-grow: 0;flex-shrink: 0;margin-right: .2em; float: left;}
</style>
<link rel="stylesheet" id="bootstrap-css" href="/wp-content/themes/MyNisarg/css/bootstrap.css?ver=6.2" type="text/css" media="all" />
<link rel="stylesheet" id="nisarg-style-css" href="/wp-content/themes/MyNisarg/style.css?ver=6.2" type="text/css" media="all" />
<style id="nisarg-style-inline-css" type="text/css">
	/* Color Scheme */

	/* Accent Color */

	a:active,
	a:hover,
	a:focus {
	    color: #009688;
	}

	.navbar-default .navbar-nav > li > a:hover, .navbar-default .navbar-nav > li > a:focus {
		color: #009688;
	}

	
	.navbar-default .navbar-nav > .active > a, .navbar-default .navbar-nav > .active > a:hover, .navbar-default .navbar-nav > .active > a:focus {
		color: #009688;			
	}

	@media (min-width: 768px){
		.navbar-default .navbar-nav > .active > a, .navbar-default .navbar-nav > .active > a:hover, .navbar-default .navbar-nav > .active > a:focus {
			border-top: 4px solid #009688;
		}		
	}

	.dropdown-menu > .active > a, .dropdown-menu > .active > a:hover, .dropdown-menu > .active > a:focus {	    
	    background-color: #009688;
	}


	.navbar-default .navbar-nav > .open > a, .navbar-default .navbar-nav > .open > a:hover, .navbar-default .navbar-nav > .open > a:focus {
		color: #009688;
	}

	.navbar-default .navbar-nav > li > .dropdown-menu > li > a:hover,
	.navbar-default .navbar-nav > li > .dropdown-menu > li > a:focus {
		color: #fff;
		background-color: #009688;
	}

	.navbar-default .navbar-nav .open .dropdown-menu > .active > a, .navbar-default .navbar-nav .open .dropdown-menu > .active > a:hover, .navbar-default .navbar-nav .open .dropdown-menu > .active > a:focus {
		background-color: #fff;
		color: #009688;
	}

	@media (max-width: 767px) {
		.navbar-default .navbar-nav .open .dropdown-menu > li > a:hover {
			background-color: #009688;
			color: #fff;
		}
	}

	.sticky-post{
	    background: #009688;
	    color:white;
	}
	
	.entry-title a:hover,
	.entry-title a:focus{
	    color: #009688;
	}

	.entry-header .entry-meta::after{
	    background: #009688;
	}

	.fa {
		color: #009688;
	}

	.btn-default{
		border-bottom: 1px solid #009688;
	}

	.btn-default:hover, .btn-default:focus{
	    border-bottom: 1px solid #009688;
	    background-color: #009688;
	}

	.nav-previous:hover, .nav-next:hover{
	    border: 1px solid #009688;
	    background-color: #009688;
	}

	.next-post a:hover,.prev-post a:hover{
	    color: #009688;
	}

	.posts-navigation .next-post a:hover .fa, .posts-navigation .prev-post a:hover .fa{
	    color: #009688;
	}


	#secondary .widget-title::after{
		background-color: #009688;
	    content: "";
	    position: absolute;
	    width: 75px;
	    display: block;
	    height: 4px;    
	    bottom: -15px;
	}

	#secondary .widget a:hover,
	#secondary .widget a:focus{
		color: #009688;
	}

	#secondary .widget_calendar tbody a {
	    background-color: #009688;
	    color: #fff;
	    padding: 0.2em;
	}

	#secondary .widget_calendar tbody a:hover{
	    background-color: #009688;
	    color: #fff;
	    padding: 0.2em;
	}	

</style>
<link rel="stylesheet" id="font-awesome-css" href="/wp-content/themes/MyNisarg/font-awesome/css/font-awesome.min.css?ver=6.2" type="text/css" media="all" />
<link rel="stylesheet" id="nisarggooglefonts-css" href="//fonts.googleapis.com/css?family=Lato:400,300italic,700|Source+Sans+Pro:400,400italic" type="text/css" media="all" />
<link rel="stylesheet" id="enlighterjs-css" href="/wp-content/plugins/enlighter/cache/enlighterjs.min.css?ver=0cuVQBPCj0viGB0" type="text/css" media="all" />
<script type="797e857a7a81bcd33e8becce-text/javascript" src="/wp-includes/js/jquery/jquery.min.js?ver=3.6.3" id="jquery-core-js"></script>
<script type="797e857a7a81bcd33e8becce-text/javascript" src="/wp-includes/js/jquery/jquery-migrate.min.js?ver=3.4.0" id="jquery-migrate-js"></script>
<script type="797e857a7a81bcd33e8becce-text/javascript" src="/wp-content/plugins/simple-post-series/autohide.js?ver=2.4" id="series-js"></script>
<script type="797e857a7a81bcd33e8becce-text/javascript" id="ez-toc-scroll-scriptjs-js-after">
jQuery(document).ready(function(){document.querySelectorAll(".ez-toc-section").forEach(t=>{t.setAttribute("ez-toc-data-id","#"+decodeURI(t.getAttribute("id")))}),jQuery("a.ez-toc-link").click(function(){let t=jQuery(this).attr("href"),e=jQuery("#wpadminbar"),i=0;30>30&&(i=30),e.length&&(i+=e.height()),jQuery('[ez-toc-data-id="'+decodeURI(t)+'"]').length>0&&(i=jQuery('[ez-toc-data-id="'+decodeURI(t)+'"]').offset().top-i),jQuery("html, body").animate({scrollTop:i},500)})});
</script>
<!--[if lt IE 9]>
<script type='text/javascript' src='/wp-content/themes/MyNisarg/js/html5shiv.js?ver=3.7.3' id='html5shiv-js'></script>
<![endif]-->
<link rel="https://api.w.org/" href="https://coolshell.cn/wp-json/" /><link rel="alternate" type="application/json" href="https://coolshell.cn/wp-json/wp/v2/posts/12103" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://coolshell.cn/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="/wp-includes/wlwmanifest.xml" />
<meta name="generator" content="WordPress 6.2" />
<link rel="shortlink" href="https://coolshell.cn/?p=12103" />
<link rel="alternate" type="application/json+oembed" href="https://coolshell.cn/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fcoolshell.cn%2Farticles%2F12103.html" />
<link rel="alternate" type="text/xml+oembed" href="https://coolshell.cn/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fcoolshell.cn%2Farticles%2F12103.html&#038;format=xml" />
<script type="797e857a7a81bcd33e8becce-text/javascript">
	window._wp_rp_static_base_url = 'https://wprp.zemanta.com/static/';
	window._wp_rp_wp_ajax_url = "https://coolshell.cn/wp-admin/admin-ajax.php";
	window._wp_rp_plugin_version = '3.6.4';
	window._wp_rp_post_id = '12103';
	window._wp_rp_num_rel_posts = '6';
	window._wp_rp_thumbnails = true;
	window._wp_rp_post_title = 'vfork+%E6%8C%82%E6%8E%89%E7%9A%84%E4%B8%80%E4%B8%AA%E9%97%AE%E9%A2%98';
	window._wp_rp_post_tags = ['unix', 'linux', 'vfork', 'fork', '%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F', 'unix%2Flinux', 'c%2Fc%2B%2B%E8%AF%AD%E8%A8%80', 'a', 'man', 'page', 'space', 'child', 'linux', 'caller', 'lt', 'tabl', 'int', 'data', 'memori', 'dai', 'system', 'parent'];
	window._wp_rp_promoted_content = true;
</script>
<link rel="stylesheet" href="/wp-content/plugins/wordpress-23-related-posts-plugin/static/themes/vertical-m.css?version=3.6.4" />
<style type="text/css">
        .site-header { background: #1d2b2d; }
</style>
</head>
<body class="post-template-default single single-post postid-12103 single-format-standard group-blog">
<link rel="stylesheet" id="nisarg-style-css" href="/wp-content/themes/MyNisarg/style.css" type="text/css" media="all">
<div id="page" class="hfeed site">
<header id="masthead" role="banner">
<nav class="navbar navbar-default navbar-fixed-top navbar-left" role="navigation">

<div class="container" id="navigation_menu">
<div class="navbar-header">
<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<a class="navbar-brand" href="/"><div class="coolshell_logo"></div>酷 壳 &#8211; CoolShell</a>
</div>
<div class="collapse navbar-collapse navbar-ex1-collapse"><ul id="menu-coolshell" class="nav navbar-nav"><li id="menu-item-17405" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-17405"><a title="首页" href="/">首页</a></li>
<li id="menu-item-17406" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-17406"><a title="推荐文章" href="/featured.html">推荐文章</a></li>
<li id="menu-item-17407" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-17407"><a title="本站插件" href="/plugins">本站插件</a></li>
<li id="menu-item-17408" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-17408"><a title="留言小本" href="/guestbook">留言小本</a></li>
<li id="menu-item-17409" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-17409"><a title="关于酷壳" href="/about">关于酷壳</a></li>
<li id="menu-item-17410" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-17410"><a title="关于陈皓" href="/haoel">关于陈皓</a></li>
<li id="menu-item-17582" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-17582"><a title="RSS" href="https://coolshell.cn/feed">RSS</a></li>
</ul></div>
</div>
</nav>
<div id="cc_spacer"></div>
<div class="site-header">
<div class="pull-right">
<a title="把这个链接拖到你的Chrome收藏夹工具栏中" href="javascript:(function(){function c(){var e=document.createElement(&quot;link&quot;);e.setAttribute(&quot;type&quot;,&quot;text/css&quot;);e.setAttribute(&quot;rel&quot;,&quot;stylesheet&quot;);e.setAttribute(&quot;href&quot;,f);e.setAttribute(&quot;class&quot;,l);document.body.appendChild(e)}function h(){var e=document.getElementsByClassName(l);for(var t=0;t<e.length;t++){document.body.removeChild(e[t])}}function p(){var e=document.createElement(&quot;div&quot;);e.setAttribute(&quot;class&quot;,a);document.body.appendChild(e);setTimeout(function(){document.body.removeChild(e)},100)}function d(e){return{height:e.offsetHeight,width:e.offsetWidth}}function v(i){var s=d(i);return s.height>e&&s.height<n&&s.width>t&&s.width<r}function m(e){var t=e;var n=0;while(!!t){n+=t.offsetTop;t=t.offsetParent}return n}function g(){var e=document.documentElement;if(!!window.innerWidth){return window.innerHeight}else if(e&&!isNaN(e.clientHeight)){return e.clientHeight}return 0}function y(){if(window.pageYOffset){return window.pageYOffset}return Math.max(document.documentElement.scrollTop,document.body.scrollTop)}function E(e){var t=m(e);return t>=w&&t<=b+w}function S(){var e=document.createElement(&quot;audio&quot;);e.setAttribute(&quot;class&quot;,l);e.src=i;e.loop=false;e.addEventListener(&quot;canplay&quot;,function(){setTimeout(function(){x(k)},500);setTimeout(function(){N();p();for(var e=0;e<O.length;e++){T(O[e])}},15500)},true);e.addEventListener(&quot;ended&quot;,function(){N();h()},true);e.innerHTML=&quot; <p>If you are reading this, it is because your browser does not support the audio element. We recommend that you get a new browser.</p> <p>&quot;;document.body.appendChild(e);e.play()}function x(e){e.className+=&quot; &quot;+s+&quot; &quot;+o}function T(e){e.className+=&quot; &quot;+s+&quot; &quot;+u[Math.floor(Math.random()*u.length)]}function N(){var e=document.getElementsByClassName(s);var t=new RegExp(&quot;\\b&quot;+s+&quot;\\b&quot;);for(var n=0;n<e.length;){e[n].className=e[n].className.replace(t,&quot;&quot;)}}var e=30;var t=30;var n=350;var r=350;var i=&quot;//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake.mp3&quot;;var s=&quot;mw-harlem_shake_me&quot;;var o=&quot;im_first&quot;;var u=[&quot;im_drunk&quot;,&quot;im_baked&quot;,&quot;im_trippin&quot;,&quot;im_blown&quot;];var a=&quot;mw-strobe_light&quot;;var f=&quot;//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake-style.css&quot;;var l=&quot;mw_added_css&quot;;var b=g();var w=y();var C=document.getElementsByTagName(&quot;*&quot;);var k=null;for(var L=0;L<C.length;L++){var A=C[L];if(v(A)){if(E(A)){k=A;break}}}if(A===null){console.warn(&quot;Could not find a node of the right size. Please try a different page.&quot;);return}c();S();var O=[];for(var L=0;L<C.length;L++){var A=C[L];if(v(A)){O.push(A)}}})()    ">High一下!</a>
</div>
<div class="site-branding">
<a class="home-link" href="https://coolshell.cn/" title="酷 壳 &#8211; CoolShell" rel="home">
<h1 class="site-title">酷 壳 &#8211; CoolShell</h1>
<h2 class="site-description">享受编程和技术所带来的快乐 &#8211; Coding Your Ambition</h2>
</a>
</div>
</div>
</header>
<div class="container">
<div class="row">
<div class="col-md-9 nav-searchbox hidden-lg hidden-md visible-sm-* visible-xs-*">
<form role="search" method="get" class="search-form" action="https://coolshell.cn/">
<label>
<span class="screen-reader-text">Search for:</span>
<input type="search" class="search-field" placeholder="Search …" value name="s" title="Search for:">
</label>
<button type="submit" class="search-submit"><span class="screen-reader-text">Search</span></button>
</form>
</div>
</div>
</div>
<div id="content" class="site-content">
<div class="container">
<div class="row">
<div id="primary" class="col-md-9 content-area">
<main id="main" role="main">
<article id="post-12103" class="post-content post-12103 post type-post status-publish format-standard hentry category-cplusplus category-unixlinux category-operatingsystem tag-fork tag-linux tag-unix tag-vfork">
<header class="entry-header">
<span class="screen-reader-text">vfork 挂掉的一个问题</span>
<h1 class="entry-title">vfork 挂掉的一个问题</h1>
<div class="entry-meta">
<h5 class="entry-date"><i class="fa fa-calendar-o"></i> <a href="/articles/12103.html" title="00:48" rel="bookmark"><time class="entry-date" datetime="2014-11-21T00:48:27+08:00" pubdate>2014年11月21日 </time></a><span class="byline"><span class="sep"></span><i class="fa fa-user"></i>
<span class="author vcard"><a class="url fn n" href="/articles/author/haoel" title="View all posts by 陈皓" rel="author">陈皓</a></span></span> <i class="fa fa-comments-o"></i><span class="screen-reader-text">评论 </span> <a href="/articles/12103.html#comments" class="comments-link">46 条评论</a> <i class="fa fa-users" style="margin-left:10px;"></i> 48,204 人阅读</h5>
</div>
</header>
<div class="entry-content">
<p><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3415450859608158" crossorigin="anonymous" type="797e857a7a81bcd33e8becce-text/javascript"></script><img decoding="async" class="alignright wp-image-12105" src="/wp-content/uploads/2014/11/tux-fork-298x300.gif" alt="tux-fork" width="199" height="200" srcset="/wp-content/uploads/2014/11/tux-fork-298x300.gif 298w, /wp-content/uploads/2014/11/tux-fork-150x150.gif 150w, /wp-content/uploads/2014/11/tux-fork-200x200.gif 200w, /wp-content/uploads/2014/11/tux-fork-268x270.gif 268w" sizes="(max-width: 199px) 100vw, 199px" />在知乎上，有个人问了这样的<a href="http://www.zhihu.com/question/26591968" target="_blank">一个问题</a>——为什么vfork的子进程里用return，整个程序会挂掉，而且exit()不会？并给出了如下的代码，下面的代码一运行就挂掉了，但如果把子进程的return改成exit(0)就没事。</p>
<p>我受邀后本来不想回答这个问题的，因为这个问题明显就是RTFM的事，后来，发现这个问题放在那里好长时间，而挂在下面的几个答案又跑偏得比较严重，我觉得可能有些朋友看到那样的答案会被误导，所以就上去回答了一下这个问题。</p>
<p>下面我把问题和我的回答发布在这里，也供更多的人查看。</p>
<pre data-enlighter-language="c" class="EnlighterJSRAW">#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;unistd.h&gt;
int main(void) {
    int var;
    var = 88;
    if ((pid = vfork()) &lt; 0) {
        printf(&quot;vfork error&quot;);
        exit(-1);
    } else if (pid == 0) { /* 子进程 */
        var++;
        return 0;
    }
    printf(&quot;pid=%d, glob=%d, var=%d\n&quot;, getpid(), glob, var);
    return 0;
}
</pre>
<p><span id="more-12103"></span></p>
<h4><b>基础知识</b></h4>
<p>首先说一下fork和vfork的差别：</p>
<ul>
<li>fork 是 创建一个子进程，并把父进程的内存数据copy到子进程中。</li>
<li>vfork是 创建一个子进程，并和父进程的内存数据share一起用。</li>
</ul>
<p>这两个的差别是，一个是copy，一个是share。（关于fork，可以参看酷壳之前的《<a title="一个fork的面试题" href="/articles/7965.html" target="_blank">一道fork的面试题</a>》）</p>
<p>你 man vfork 一下，你可以看到，vfork是这样的工作的，</p>
<p style="padding-left: 30px;">1）保证子进程先执行。<br/>
2）当子进程调用exit()或exec()后，父进程往下执行。</p>
<p>那么，为什么要干出一个vfork这个玩意？ 原因在man page也讲得很清楚了：</p>
<blockquote><p><strong>Historic Description</strong></p>
<p>Under Linux, fork(2) is implemented using copy-on-write pages, so the only penalty incurred by fork(2) is the time and memory required to duplicate the parent’s page tables, and to create a unique task structure for the child. <b>However, in the bad old days a fork(2) would require making </b><b>a complete copy of the caller’s data space, often needlessly, since usually immediately afterwards an exec(3) is done. Thus, for greater efficiency, BSD introduced the vfork() system call, which did not fully copy the address space of the parent process, but borrowed the parent’s mem</b><b>ory and thread of control until a call to execve(2) or an exit occurred.</b> The parent process was suspended while the child was using its resources. The use of vfork() was tricky: for example, not modifying data in the parent process depended on knowing which variables are held in a register.</p></blockquote>
<p>意思是这样的—— <b>起初只有fork，但是很多程序在fork一个子进程后就exec一个外部程序，于是fork需要copy父进程的数据这个动作就变得毫无意了，而且这样干还很重</b>（注：后来，fork做了优化，详见本文后面）<b>，所以，BSD搞出了个父子进程共享的 vfork，这样成本比较低。因此，vfork本就是为了exec而生。</b></p>
<h4><b>为什么return会挂掉，exit()不会？</b></h4>
<p>从上面我们知道，<b>结束子进程的调用是exit()而不是return，如果你在vfork中return了，那么，这就意味main()函数return了，注意因为函数栈父子进程共享，所以整个程序的栈就跪了。</b></p>
<p>如果你在子进程中return，那么基本是下面的过程：</p>
<p style="padding-left: 30px;"><b>1）子进程的main() 函数 return了，于是程序的函数栈发生了变化。</b></p>
<p style="padding-left: 30px;"><b>2）而main()函数return后，通常会调用 exit()或相似的函数</b>（如：_exit()，exitgroup()）</p>
<p style="padding-left: 30px;"><b>3）这时，父进程收到子进程exit()，开始从vfork返回，但是尼玛，老子的栈都被你子进程给return干废掉了，你让我怎么执行？</b>（注：栈会返回一个诡异一个栈地址，对于某些内核版本的实现，直接报“栈错误”就给跪了，然而，对于某些内核版本的实现，于是有可能会再次调用main()，于是进入了一个无限循环的结果，直到vfork 调用返回 error）</p>
<p>好了，现在再回到 return 和 exit，return会释放局部变量，并弹栈，回到上级函数执行。exit直接退掉。如果你用c++ 你就知道，return会调用局部对象的析构函数，exit不会。（注：exit不是系统调用，是glibc对系统调用 _exit()或_exitgroup()的封装）</p>
<p>可见，<b>子进程调用exit() 没有修改函数栈，所以，父进程得以顺利执行</b>。</p>
<p><strong>但是！注意！如果你调用 exit() 函数，还是会有问题的，正确的方法应该是调用 _exit() 函数，因为 exit() 函数 会 flush 并 close 所有的 标准 I/O ，这样会导致父进程受到影响。（这个情况在fork下也会受到影响，会导致一些被buffer的数据被flush两次，这里可以参看《<a href="/articles/7965.html" target="_blank">一个fork的面试题</a>》）</strong></p>
<h4>关于fork的优化</h4>
<p>很明显，fork太重，而vfork又太危险，所以，就有人开始优化fork这个系统调用。优化的技术用到了著名的<b>写时拷贝（COW）</b>。</p>
<p>也就是说，<strong>对于fork后并不是马上拷贝内存，而是只有你在需要改变的时候，才会从父进程中拷贝到子进程中，这样fork后立马执行exec的成本就非常小了</strong>。所以，Linux的Man Page中并不鼓励使用vfork() ——</p>
<blockquote><p>“ It is rather unfortunate that Linux revived this specter from the past. The BSD man page states: &#8220;This system call will be eliminated when proper system sharing mechanisms are implemented. Users should not depend on the memory sharing semantics of vfork() as it will, in that case, be made synonymous to fork(2).&#8221;”</p></blockquote>
<p>于是，从BSD4.4开始，他们让vfork和fork变成一样的了</p>
<p>但在后来，NetBSD 1.3 又把传统的vfork给捡了回来，说是vfork的性能在 Pentium Pro 200MHz 的机器（这机器好古董啊）上有可以提高几秒钟的性能。详情见——“<a class=" wrap external" href="http://www.netbsd.org/docs/kernel/vfork.html" target="_blank" rel="nofollow noreferrer">NetBSD Documentation: Why implement traditional vfork()<i class="icon-external"></i></a>”</p>
<p>今天的Linux下，fork和vfork还是各是各的，不过，还是建议你不要用vfork，除非你非常关注性能。</p>
<p>（全文完）</p>
<div style="margin-top: 15px; font-size: 16px;color: #cc0000;">
<p align="center"><strong>（转载本站文章请注明作者和出处 <a href="https://coolshell.cn/">酷 壳 &#8211; CoolShell</a> ，请勿用于任何商业用途）</strong></p>
</div>
<div class="wp_rp_wrap  wp_rp_vertical_m" id="wp_rp_first"><div class="wp_rp_content"><h3 class="related_post_title">相关文章</h3><ul class="related_post wp_rp"><li><a href="/articles/18360.html" class="wp_rp_thumbnail"><img src="/wp-content/uploads/2018/05/300x262-150x150.jpg" alt="程序员练级攻略（2018)  与我的专栏" width="150" height="150" /></a><a href="/articles/18360.html" class="wp_rp_title">程序员练级攻略（2018) 与我的专栏</a></li><li><a href="/articles/17998.html" class="wp_rp_thumbnail"><img src="/wp-content/uploads/2017/07/systemd-1-150x150.jpeg" alt="Linux PID 1 和 Systemd" width="150" height="150" /></a><a href="/articles/17998.html" class="wp_rp_title">Linux PID 1 和 Systemd</a></li><li><a href="/articles/11847.html" class="wp_rp_thumbnail"><img src="/wp-content/uploads/2014/08/puzzle-150x150.png" alt="谜题的答案和活动的心得体会" width="150" height="150" /></a><a href="/articles/11847.html" class="wp_rp_title">谜题的答案和活动的心得体会</a></li><li><a href="/articles/9104.html" class="wp_rp_thumbnail"><img src="/wp-content/uploads/2013/02/sed-superman-150x150.png" alt="sed 简明教程" width="150" height="150" /></a><a href="/articles/9104.html" class="wp_rp_title">sed 简明教程</a></li><li><a href="/articles/9070.html" class="wp_rp_thumbnail"><img src="/wp-content/uploads/2013/02/awk-150x150.jpg" alt="AWK 简明教程" width="150" height="150" /></a><a href="/articles/9070.html" class="wp_rp_title">AWK 简明教程</a></li><li><a href="/articles/8883.html" class="wp_rp_thumbnail"><img src="/wp-content/uploads/2013/01/linux-bash-300x225-150x150.jpg" alt="应该知道的Linux技巧" width="150" height="150" /></a><a href="/articles/8883.html" class="wp_rp_title">应该知道的Linux技巧</a></li></ul></div></div>
<div id="post-ratings-12103" class="post-ratings" itemscope itemtype="https://schema.org/Article" data-nonce="6eba526b22"><img id="rating_12103_1" src="/wp-content/plugins/wp-postratings/images/stars_crystal/rating_on.gif" alt="好烂啊" title="好烂啊" onmouseover="if (!window.__cfRLUnblockHandlers) return false; current_rating(12103, 1, '好烂啊');" onmouseout="if (!window.__cfRLUnblockHandlers) return false; ratings_off(4.4, 5, 0);" onclick="if (!window.__cfRLUnblockHandlers) return false; rate_post();" onkeypress="if (!window.__cfRLUnblockHandlers) return false; rate_post();" style="cursor: pointer; border: 0px;" data-cf-modified-797e857a7a81bcd33e8becce- /><img id="rating_12103_2" src="/wp-content/plugins/wp-postratings/images/stars_crystal/rating_on.gif" alt="有点差" title="有点差" onmouseover="if (!window.__cfRLUnblockHandlers) return false; current_rating(12103, 2, '有点差');" onmouseout="if (!window.__cfRLUnblockHandlers) return false; ratings_off(4.4, 5, 0);" onclick="if (!window.__cfRLUnblockHandlers) return false; rate_post();" onkeypress="if (!window.__cfRLUnblockHandlers) return false; rate_post();" style="cursor: pointer; border: 0px;" data-cf-modified-797e857a7a81bcd33e8becce- /><img id="rating_12103_3" src="/wp-content/plugins/wp-postratings/images/stars_crystal/rating_on.gif" alt="凑合看看" title="凑合看看" onmouseover="if (!window.__cfRLUnblockHandlers) return false; current_rating(12103, 3, '凑合看看');" onmouseout="if (!window.__cfRLUnblockHandlers) return false; ratings_off(4.4, 5, 0);" onclick="if (!window.__cfRLUnblockHandlers) return false; rate_post();" onkeypress="if (!window.__cfRLUnblockHandlers) return false; rate_post();" style="cursor: pointer; border: 0px;" data-cf-modified-797e857a7a81bcd33e8becce- /><img id="rating_12103_4" src="/wp-content/plugins/wp-postratings/images/stars_crystal/rating_on.gif" alt="还不错" title="还不错" onmouseover="if (!window.__cfRLUnblockHandlers) return false; current_rating(12103, 4, '还不错');" onmouseout="if (!window.__cfRLUnblockHandlers) return false; ratings_off(4.4, 5, 0);" onclick="if (!window.__cfRLUnblockHandlers) return false; rate_post();" onkeypress="if (!window.__cfRLUnblockHandlers) return false; rate_post();" style="cursor: pointer; border: 0px;" data-cf-modified-797e857a7a81bcd33e8becce- /><img id="rating_12103_5" src="/wp-content/plugins/wp-postratings/images/stars_crystal/rating_half.gif" alt="很精彩" title="很精彩" onmouseover="if (!window.__cfRLUnblockHandlers) return false; current_rating(12103, 5, '很精彩');" onmouseout="if (!window.__cfRLUnblockHandlers) return false; ratings_off(4.4, 5, 0);" onclick="if (!window.__cfRLUnblockHandlers) return false; rate_post();" onkeypress="if (!window.__cfRLUnblockHandlers) return false; rate_post();" style="cursor: pointer; border: 0px;" data-cf-modified-797e857a7a81bcd33e8becce- /> (<strong>54</strong> 人打了分，平均分： <strong>4.37</strong> )<br/><span class="post-ratings-text" id="ratings_12103_text"></span><meta itemprop="name" content="vfork 挂掉的一个问题" /><meta itemprop="headline" content="vfork 挂掉的一个问题" /><meta itemprop="description" content="在知乎上，有个人问了这样的一个问题&mdash;&mdash;为什么vfork的子进程里用return，整个程序会挂掉，而且exit()不会？并给出了如下的代码，下面的代码一运行就挂掉了，但如果把子进程的return改成exit(0)就没事。

我受邀后本来不想回答这个问题的，因为这个问题明显就是RTFM的事，后来，发现这个问题放在那里好长时间，而挂在下面的几个答案又跑偏得比较严重，我觉得可能有些朋友看到那样的答案会..." /><meta itemprop="datePublished" content="2014-11-21T00:48:27+08:00" /><meta itemprop="dateModified" content="2016-12-25T10:54:57+08:00" /><meta itemprop="url" content="/articles/12103.html" /><meta itemprop="author" content="陈皓" /><meta itemprop="mainEntityOfPage" content="/articles/12103.html" /><div style="display: none;" itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="酷 壳 - CoolShell" /><meta itemprop="url" content="https://coolshell.cn" /><div itemprop="logo" itemscope itemtype="https://schema.org/ImageObject"><meta itemprop="url" content /></div></div><div style="display: none;" itemprop="aggregateRating" itemscope itemtype="https://schema.org/AggregateRating"><meta itemprop="bestRating" content="5" /><meta itemprop="worstRating" content="1" /><meta itemprop="ratingValue" content="4.37" /><meta itemprop="ratingCount" content="54" /></div></div><div id="post-ratings-12103-loading" class="post-ratings-loading"><img src="/wp-content/plugins/wp-postratings/images/loading.gif" width="16" height="16" class="post-ratings-image" />Loading...</div>
</div>
<footer class="entry-footer">
<hr><div class="row"><div class="col-md-6 cattegories"><span class="cat-links"><i class="fa fa-folder-open"></i>
<a href="/category/proglanguage/cplusplus" rel="category tag">C/C++语言</a>, <a href="/category/operatingsystem/unixlinux" rel="category tag">Unix/Linux</a>, <a href="/category/operatingsystem" rel="category tag">操作系统</a></span></div><div class="col-md-6 tags"><span class="tags-links"><i class="fa fa-tags"></i> <a href="/tag/fork" rel="tag">fork</a>, <a href="/tag/linux" rel="tag">Linux</a>, <a href="/tag/unix" rel="tag">Unix</a>, <a href="/tag/vfork" rel="tag">vfork</a></span></div></div> </footer>
</article>

<div id="related_posts">
<div class="wp_rp_wrap  wp_rp_vertical_m"><div class="wp_rp_content"><h3 class="related_post_title">相关文章</h3><ul class="related_post wp_rp"><li><a href="/articles/18360.html" class="wp_rp_thumbnail"><img src="/wp-content/uploads/2018/05/300x262-150x150.jpg" alt="程序员练级攻略（2018)  与我的专栏" width="150" height="150" /></a><a href="/articles/18360.html" class="wp_rp_title">程序员练级攻略（2018) 与我的专栏</a></li><li><a href="/articles/17998.html" class="wp_rp_thumbnail"><img src="/wp-content/uploads/2017/07/systemd-1-150x150.jpeg" alt="Linux PID 1 和 Systemd" width="150" height="150" /></a><a href="/articles/17998.html" class="wp_rp_title">Linux PID 1 和 Systemd</a></li><li><a href="/articles/11847.html" class="wp_rp_thumbnail"><img src="/wp-content/uploads/2014/08/puzzle-150x150.png" alt="谜题的答案和活动的心得体会" width="150" height="150" /></a><a href="/articles/11847.html" class="wp_rp_title">谜题的答案和活动的心得体会</a></li><li><a href="/articles/9104.html" class="wp_rp_thumbnail"><img src="/wp-content/uploads/2013/02/sed-superman-150x150.png" alt="sed 简明教程" width="150" height="150" /></a><a href="/articles/9104.html" class="wp_rp_title">sed 简明教程</a></li><li><a href="/articles/9070.html" class="wp_rp_thumbnail"><img src="/wp-content/uploads/2013/02/awk-150x150.jpg" alt="AWK 简明教程" width="150" height="150" /></a><a href="/articles/9070.html" class="wp_rp_title">AWK 简明教程</a></li><li><a href="/articles/8883.html" class="wp_rp_thumbnail"><img src="/wp-content/uploads/2013/01/linux-bash-300x225-150x150.jpg" alt="应该知道的Linux技巧" width="150" height="150" /></a><a href="/articles/8883.html" class="wp_rp_title">应该知道的Linux技巧</a></li></ul></div></div>
</div><div class="fixed"></div> 
</main>
<div class="post-navigation">
<nav class="navigation" role="navigation">
<h2 class="screen-reader-text">Post navigation</h2>
<div class="nav-links">
<div class="row">

<div class="col-md-6 next-post">
<a class href="/articles/12136.html"><span class="next-prev-text"><i class="fa fa-angle-left"></i>
上一篇</span><br>Google Inbox如何跨平台重用代码？</a>
</div>

<div class="col-md-6 prev-post">
<a class href="/articles/12052.html"><span class="next-prev-text">下一篇 <i class="fa fa-angle-right"></i>
</span><br>Leetcode 编程训练</a>
</div>
</div>
</div>
</nav>
</div>
<div class="post-comments">
<div id="comments" class="comments-area">
<h2 class="comments-title">
《<span>vfork 挂掉的一个问题</span>》的相关评论 </h2>
<ol class="comment-list">
<li id="comment-1609805" class="comment even thread-even depth-1">
<article id="div-comment-1609805" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/9046943d03a5d41827ff251bfbff1d6c?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/9046943d03a5d41827ff251bfbff1d6c?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">int64ago</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/12103.html#comment-1609805"><time datetime="2014-11-21T09:17:26+08:00">2014年11月21日 09:17</time></a> </div>
</footer>
<div class="comment-content">
<p>原来exit不清理资源啊……<br/>
那就是等着系统清理咯？</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/articles/12103.html?replytocom=1609805#respond" data-commentid="1609805" data-postid="12103" data-belowelement="div-comment-1609805" data-respondelement="respond" data-replyto="回复给int64ago" aria-label="回复给int64ago">回复</a></div> </article>
</li>
<li id="comment-1609809" class="comment odd alt thread-odd thread-alt depth-1">
<article id="div-comment-1609809" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/407805eeb85660fb231d8d4a2aaf514b?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/407805eeb85660fb231d8d4a2aaf514b?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">feenn</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/12103.html#comment-1609809"><time datetime="2014-11-21T09:24:20+08:00">2014年11月21日 09:24</time></a> </div>
</footer>
<div class="comment-content">
<p>再次说明不看手册就直接用api的都是危险的行为。<br/>
btw：我确实关注性能，所以我大量用vfork。</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/articles/12103.html?replytocom=1609809#respond" data-commentid="1609809" data-postid="12103" data-belowelement="div-comment-1609809" data-respondelement="respond" data-replyto="回复给feenn" aria-label="回复给feenn">回复</a></div> </article>
</li>
<li id="comment-1609820" class="comment even thread-even depth-1">
<article id="div-comment-1609820" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/bdf23c63251cdd962b0c527a5d7b9217?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/bdf23c63251cdd962b0c527a5d7b9217?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">linpeng1577</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/12103.html#comment-1609820"><time datetime="2014-11-21T09:44:18+08:00">2014年11月21日 09:44</time></a> </div>
</footer>
<div class="comment-content">
<p><a href="#comment-1609805" rel="nofollow">@int64ago </a><br/>
释放很多资源，比如cs,ds,文件引用&#8211;，会话等等，只是用户栈是和父进程共享的，不会释放，系统清理，_exit()没有说自己是系统清理</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/articles/12103.html?replytocom=1609820#respond" data-commentid="1609820" data-postid="12103" data-belowelement="div-comment-1609820" data-respondelement="respond" data-replyto="回复给linpeng1577" aria-label="回复给linpeng1577">回复</a></div> </article>
</li>
<li id="comment-1609884" class="comment odd alt thread-odd thread-alt depth-1">
<article id="div-comment-1609884" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/64f2aff021ad2833a7b98920f51df7da?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/64f2aff021ad2833a7b98920f51df7da?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn"><a href="http://blog.catscarlet.com" class="url" rel="ugc external nofollow">独行猫儿</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/12103.html#comment-1609884"><time datetime="2014-11-21T11:15:19+08:00">2014年11月21日 11:15</time></a> </div>
</footer>
<div class="comment-content">
<p>你这配图好基♂</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/articles/12103.html?replytocom=1609884#respond" data-commentid="1609884" data-postid="12103" data-belowelement="div-comment-1609884" data-respondelement="respond" data-replyto="回复给独行猫儿" aria-label="回复给独行猫儿">回复</a></div> </article>
</li>
<li id="comment-1609886" class="comment even thread-even depth-1">
<article id="div-comment-1609886" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/9064b7bc9f7073393225b411501980ce?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/9064b7bc9f7073393225b411501980ce?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">zhy</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/12103.html#comment-1609886"><time datetime="2014-11-21T11:16:26+08:00">2014年11月21日 11:16</time></a> </div>
</footer>
<div class="comment-content">
<p>又会一招~~</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/articles/12103.html?replytocom=1609886#respond" data-commentid="1609886" data-postid="12103" data-belowelement="div-comment-1609886" data-respondelement="respond" data-replyto="回复给zhy" aria-label="回复给zhy">回复</a></div> </article>
</li>
<li id="comment-1610014" class="comment odd alt thread-odd thread-alt depth-1">
<article id="div-comment-1610014" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/3609a386bac95ccd229ae1a5e486064c?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/3609a386bac95ccd229ae1a5e486064c?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">ngcc</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/12103.html#comment-1610014"><time datetime="2014-11-21T14:12:34+08:00">2014年11月21日 14:12</time></a> </div>
</footer>
<div class="comment-content">
<p>APUE中描述：Historically, the exit function has always performed a clean shutdown of the standard I/O library: the fclose function is called for all open streams。其实exit 和 return 作用一样 ，但是_exit() 和_Exit() does not perform any flushing of standard I/O buffers</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/articles/12103.html?replytocom=1610014#respond" data-commentid="1610014" data-postid="12103" data-belowelement="div-comment-1610014" data-respondelement="respond" data-replyto="回复给ngcc" aria-label="回复给ngcc">回复</a></div> </article>
</li>
<li id="comment-1610015" class="comment even thread-even depth-1">
<article id="div-comment-1610015" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/17e6b73e5ce1b47dc7dbeee9bbb9284c?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/17e6b73e5ce1b47dc7dbeee9bbb9284c?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">jsxgblcxp</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/12103.html#comment-1610015"><time datetime="2014-11-21T14:12:43+08:00">2014年11月21日 14:12</time></a> </div>
</footer>
<div class="comment-content">
<p>我是来膜拜配图的 哈哈</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/articles/12103.html?replytocom=1610015#respond" data-commentid="1610015" data-postid="12103" data-belowelement="div-comment-1610015" data-respondelement="respond" data-replyto="回复给jsxgblcxp" aria-label="回复给jsxgblcxp">回复</a></div> </article>
</li>
<li id="comment-1610019" class="comment odd alt thread-odd thread-alt depth-1">
<article id="div-comment-1610019" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/3609a386bac95ccd229ae1a5e486064c?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/3609a386bac95ccd229ae1a5e486064c?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">ngcc</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/12103.html#comment-1610019"><time datetime="2014-11-21T14:18:28+08:00">2014年11月21日 14:18</time></a> </div>
</footer>
<div class="comment-content">
<pre data-enlighter-language="c" class="EnlighterJSRAW">#include &quot;apue.h&quot;

int     glob = 6;       /* external variable in initialized data */

int
main(void)
{
    int     var;        /* automatic variable on the stack */
    pid_t   pid;

    var = 88;
    printf(&quot;before vfork\n&quot;);   /* we don&#039;t flush stdio */
    if ((pid = vfork()) &amp;lt; 0) {
        err_sys(&quot;vfork error&quot;);
    } else if (pid == 0) {      /* child */
        glob++; /* modify parent&#039;s variables */
        var++;
        _exit(0); /* child terminates */  
                 //此处一般不会调用 exit的，否则影响父进程
                 //如果return 就如大Boss说的破坏函数返回地址栈
    }
    /*
     * Parent continues here.
     */
    printf(&quot;pid = %d, glob = %d, var = %d\n&quot;, getpid(), glob, var);
    exit(0);
}</pre>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/articles/12103.html?replytocom=1610019#respond" data-commentid="1610019" data-postid="12103" data-belowelement="div-comment-1610019" data-respondelement="respond" data-replyto="回复给ngcc" aria-label="回复给ngcc">回复</a></div> </article>
</li>
<li id="comment-1610077" class="comment even thread-even depth-1">
<article id="div-comment-1610077" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/f15f63ff90d93a55809e054afbdea645?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/f15f63ff90d93a55809e054afbdea645?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">Williams-Lu</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/12103.html#comment-1610077"><time datetime="2014-11-21T15:47:42+08:00">2014年11月21日 15:47</time></a> </div>
</footer>
<div class="comment-content">
<p>Mark</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/articles/12103.html?replytocom=1610077#respond" data-commentid="1610077" data-postid="12103" data-belowelement="div-comment-1610077" data-respondelement="respond" data-replyto="回复给Williams-Lu" aria-label="回复给Williams-Lu">回复</a></div> </article>
</li>
<li id="comment-1610766" class="comment odd alt thread-odd thread-alt depth-1">
<article id="div-comment-1610766" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/632b57f3d86e576de9b90dda45e26789?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/632b57f3d86e576de9b90dda45e26789?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">Mr.Mushroom</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/12103.html#comment-1610766"><time datetime="2014-11-22T09:15:59+08:00">2014年11月22日 09:15</time></a> </div>
</footer>
<div class="comment-content">
<p>耗子老师什么都教啊, RTFM = Read the Fucking Manuel.</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/articles/12103.html?replytocom=1610766#respond" data-commentid="1610766" data-postid="12103" data-belowelement="div-comment-1610766" data-respondelement="respond" data-replyto="回复给Mr.Mushroom" aria-label="回复给Mr.Mushroom">回复</a></div> </article>
</li>
<li id="comment-1611334" class="comment even thread-even depth-1">
<article id="div-comment-1611334" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/ee59cc6f674d495e835d48437aee8152?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/ee59cc6f674d495e835d48437aee8152?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn"><a href="https://github.com/wks" class="url" rel="ugc external nofollow">wks</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/12103.html#comment-1611334"><time datetime="2014-11-22T22:32:15+08:00">2014年11月22日 22:32</time></a> </div>
</footer>
<div class="comment-content">
<p>我看的man page是这个版本：http://man7.org/linux/man-pages/man2/vfork.2.html</p>
<p>man page里的这句话让我很不安：“&#8230; except that the behavior is undefined if the process created by vfork() either modifies any data other than a variable of type pid_t used to store the return value from vfork() &#8230;”这里，“any data”以及“variable”这些词定义得很含糊。variable是C这样的高级语言才有的概念，汇编看到的就只有寄存器和内存。即使用C语言，优化器也可以很自由地决定变量究竟是存放在寄存器里还是内存里。如果C语言调用exec这样的函数，而参数是表达式，那么编译器还是会生成对参数求值的代码，这其中难免会修改栈上的数据。同时，由于calling convention，编译器会将某些寄存器的值腾出来供传入变量用，同时也会把相应的寄存器的旧值spill到栈上。这其中，“modify any data”几乎任何地方都可能发生。</p>
<p>更令人不安的就是另外一句话：“The use of vfork() was tricky: for example, not modifying data in the parent process depended on knowing which variables were held in a register.”这对编译器的要求太高了。看样子编译器不把vfork变成“内置函数”都没办法。</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/articles/12103.html?replytocom=1611334#respond" data-commentid="1611334" data-postid="12103" data-belowelement="div-comment-1611334" data-respondelement="respond" data-replyto="回复给wks" aria-label="回复给wks">回复</a></div> </article>
</li>
<li id="comment-1612436" class="comment odd alt thread-odd thread-alt depth-1">
<article id="div-comment-1612436" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/14dbdd0cd39bdcb1cb94700bfdc69b51?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/14dbdd0cd39bdcb1cb94700bfdc69b51?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn"><a href="http://cy198706.com" class="url" rel="ugc external nofollow">死神的微笑</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/12103.html#comment-1612436"><time datetime="2014-11-24T10:24:34+08:00">2014年11月24日 10:24</time></a> </div>
</footer>
<div class="comment-content">
<p>其实想到fork和vfork的区别就应该明白了。。</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/articles/12103.html?replytocom=1612436#respond" data-commentid="1612436" data-postid="12103" data-belowelement="div-comment-1612436" data-respondelement="respond" data-replyto="回复给死神的微笑" aria-label="回复给死神的微笑">回复</a></div> </article>
</li>
<li id="comment-1612758" class="comment even thread-even depth-1">
<article id="div-comment-1612758" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/2f3c835ee12dda8bd5f5a86ff293bb5a?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/2f3c835ee12dda8bd5f5a86ff293bb5a?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn"><a href="http://www.cpplog.com" class="url" rel="ugc external nofollow">cpplog</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/12103.html#comment-1612758"><time datetime="2014-11-24T18:01:22+08:00">2014年11月24日 18:01</time></a> </div>
</footer>
<div class="comment-content">
<p>学习了，耗子老师的每篇文章都让人读后，有所收获。</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/articles/12103.html?replytocom=1612758#respond" data-commentid="1612758" data-postid="12103" data-belowelement="div-comment-1612758" data-respondelement="respond" data-replyto="回复给cpplog" aria-label="回复给cpplog">回复</a></div> </article>
</li>
<li id="comment-1612894" class="comment odd alt thread-odd thread-alt depth-1">
<article id="div-comment-1612894" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/a754df62bcca482e53736b7f53673cc5?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/a754df62bcca482e53736b7f53673cc5?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn"><a href="http://pvq.me" class="url" rel="ugc external nofollow">ChanneW</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/12103.html#comment-1612894"><time datetime="2014-11-24T23:34:51+08:00">2014年11月24日 23:34</time></a> </div>
</footer>
<div class="comment-content">
<p>这配图好有 feel</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/articles/12103.html?replytocom=1612894#respond" data-commentid="1612894" data-postid="12103" data-belowelement="div-comment-1612894" data-respondelement="respond" data-replyto="回复给ChanneW" aria-label="回复给ChanneW">回复</a></div> </article>
</li>
<li id="comment-1613444" class="comment even thread-even depth-1">
<article id="div-comment-1613444" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/bea534291e039984e1177764cfee5901?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/bea534291e039984e1177764cfee5901?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">TinyHui.Wang</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/12103.html#comment-1613444"><time datetime="2014-11-25T11:39:40+08:00">2014年11月25日 11:39</time></a> </div>
</footer>
<div class="comment-content">
<p>你看，英语多重要。man已经写的很详细了。</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/articles/12103.html?replytocom=1613444#respond" data-commentid="1613444" data-postid="12103" data-belowelement="div-comment-1613444" data-respondelement="respond" data-replyto="回复给TinyHui.Wang" aria-label="回复给TinyHui.Wang">回复</a></div> </article>
</li>
<li id="comment-1613620" class="comment odd alt thread-odd thread-alt depth-1">
<article id="div-comment-1613620" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/ba1fa4b45f5a12831241ca8613278b0b?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/ba1fa4b45f5a12831241ca8613278b0b?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn"><a href="http://www.gbtags.com" class="url" rel="ugc external nofollow">terry</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/12103.html#comment-1613620"><time datetime="2014-11-25T17:51:14+08:00">2014年11月25日 17:51</time></a> </div>
</footer>
<div class="comment-content">
<p>楼主讲述的很详细，赞</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/articles/12103.html?replytocom=1613620#respond" data-commentid="1613620" data-postid="12103" data-belowelement="div-comment-1613620" data-respondelement="respond" data-replyto="回复给terry" aria-label="回复给terry">回复</a></div> </article>
</li>
<li id="comment-1616104" class="comment even thread-even depth-1">
<article id="div-comment-1616104" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/15df6c4f6afc7e82191fe41cad65b599?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/15df6c4f6afc7e82191fe41cad65b599?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">Zenga</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/12103.html#comment-1616104"><time datetime="2014-11-28T16:40:36+08:00">2014年11月28日 16:40</time></a> </div>
</footer>
<div class="comment-content">
<p>现在fork（）应该已经使用了copy-on-wright了吧？所以绝大部分情况下都不需要使用Vfork了</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/articles/12103.html?replytocom=1616104#respond" data-commentid="1616104" data-postid="12103" data-belowelement="div-comment-1616104" data-respondelement="respond" data-replyto="回复给Zenga" aria-label="回复给Zenga">回复</a></div> </article>
</li>
<li id="comment-1616174" class="comment odd alt thread-odd thread-alt depth-1">
<article id="div-comment-1616174" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/65086a1c6937a501163956fcc16800b7?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/65086a1c6937a501163956fcc16800b7?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">lxyscls</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/12103.html#comment-1616174"><time datetime="2014-11-28T17:52:15+08:00">2014年11月28日 17:52</time></a> </div>
</footer>
<div class="comment-content">
<p>1024个赞</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/articles/12103.html?replytocom=1616174#respond" data-commentid="1616174" data-postid="12103" data-belowelement="div-comment-1616174" data-respondelement="respond" data-replyto="回复给lxyscls" aria-label="回复给lxyscls">回复</a></div> </article>
</li>
<li id="comment-1616650" class="comment even thread-even depth-1">
<article id="div-comment-1616650" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/678236d1e4d897ba54280376438179f5?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/678236d1e4d897ba54280376438179f5?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">vulcan</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/12103.html#comment-1616650"><time datetime="2014-11-29T09:44:00+08:00">2014年11月29日 09:44</time></a> </div>
</footer>
<div class="comment-content">
<p>关于&#8221;child-runs-first&#8221;,可参考http://yarchive.net/comp/linux/child-runs-first.html</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/articles/12103.html?replytocom=1616650#respond" data-commentid="1616650" data-postid="12103" data-belowelement="div-comment-1616650" data-respondelement="respond" data-replyto="回复给vulcan" aria-label="回复给vulcan">回复</a></div> </article>
</li>
<li id="comment-1621228" class="comment odd alt thread-odd thread-alt depth-1">
<article id="div-comment-1621228" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/7b04b7f28cad0058609b58af122a2a0c?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/7b04b7f28cad0058609b58af122a2a0c?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">jxncjl</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/12103.html#comment-1621228"><time datetime="2014-12-04T21:49:49+08:00">2014年12月04日 21:49</time></a> </div>
</footer>
<div class="comment-content">
<p>#include<br/>
#include<br/>
#include<br/>
int glob = 6;</p>
<p>int main()<br/>
{<br/>
int var, v;<br/>
var = 5;<br/>
v = 88;<br/>
pid_t pid;<br/>
if((pid = vfork())&lt;0)<br/>
{<br/>
printf(&quot;fork error&#8230;&quot;);<br/>
exit(-1);<br/>
}<br/>
else if(pid == 0)<br/>
{<br/>
v++;<br/>
var++;<br/>
glob++;<br/>
printf(&quot;Child procss = %d; v=%d; var=%d; glob=%d\n&quot;, getpid(),v,var,glob);<br/>
return 0;<br/>
}<br/>
printf(&quot;Parent process = %d;v=%d; pid = %d; var=%d; glob=%d\n&quot;, getpid(), v, pid,var,glob);</p>
<p> return 0;<br/>
}<br/>
按照LZ的解释，vfork出的子进程和父进程是共享同一片物理内存区域的，当子进程return后，原来main内存栈就会被摧毁了，之前在该栈中存放的局部变量，如var,v,pid的值都不能保证是原来的值，那为何我每次运行该程序，发现父进行打印出v，pid的值都还是原来的，而v的值却是每次都变动，不科学啊。<br/>
运行结果如下所示：<br/>
<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="5d2e3838391d2e3838397039382e3629322d">[email&#160;protected]</a>:/tmp$ ./a.out<br/>
Child procss = 8088; v=89; var=6; glob=7<br/>
Parent process = 8087;v=1; pid = 8088; var=-1208462364; glob=7<br/>
段错误<br/>
<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="a0d3c5c5c4e0d3c5c5c48dc4c5d3cbd4cfd0">[email&#160;protected]</a>:/tmp$ ./a.out<br/>
Child procss = 8090; v=89; var=6; glob=7<br/>
Parent process = 8089;v=1; pid = 8090; var=-1209146396; glob=7<br/>
段错误</p>
<p>突然还有一个问题挺困惑的：对于fork，vfork的赋值给pid。对于pid=fork()我是这么理解了：因为fork是子进程拷贝了父进程的一个备份，所以虽然pid在栈中存放的虚拟地址是一样的，但地址映射到不同的物理页，所以在子进程中读取pid的值就是0，而在父进程读取pid的值就为一个常数（即子进程的进程号）。<br/>
而pid=vfork()就不好理解了，因为父子进程是共享同一片内存区域的，所以映射到同一个物理页，然而子进程读取pid的值依然为0，这怎么解释呢？然道专门为pid的内存虚拟地址专门开辟了一个物理页给子进程吗？</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/articles/12103.html?replytocom=1621228#respond" data-commentid="1621228" data-postid="12103" data-belowelement="div-comment-1621228" data-respondelement="respond" data-replyto="回复给jxncjl" aria-label="回复给jxncjl">回复</a></div> </article>
</li>
<li id="comment-1623597" class="comment even thread-even depth-1">
<article id="div-comment-1623597" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/1b1c31f6ba284dd03310cb041878cf15?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/1b1c31f6ba284dd03310cb041878cf15?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn"><a href="http://swpustc.wicp.net" class="url" rel="ugc external nofollow">swpustc</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/12103.html#comment-1623597"><time datetime="2014-12-07T17:45:49+08:00">2014年12月07日 17:45</time></a> </div>
</footer>
<div class="comment-content">
<p><a href="#comment-1621228" rel="nofollow">@jxncjl </a><br/>
函数的返回值在EAX(RAX)寄存器中，优化过的程序应该直接读的寄存器，除非pid声明为volatile</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/articles/12103.html?replytocom=1623597#respond" data-commentid="1623597" data-postid="12103" data-belowelement="div-comment-1623597" data-respondelement="respond" data-replyto="回复给swpustc" aria-label="回复给swpustc">回复</a></div> </article>
</li>
<li id="comment-1630186" class="comment odd alt thread-odd thread-alt depth-1">
<article id="div-comment-1630186" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/12e93fa54f5801e2c4d404826724bf22?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/12e93fa54f5801e2c4d404826724bf22?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">everett</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/12103.html#comment-1630186"><time datetime="2014-12-15T19:57:03+08:00">2014年12月15日 19:57</time></a> </div>
</footer>
<div class="comment-content">
<p>一年多以前遇到这个问题了，一直没有解决，后来慢慢就淡忘了，今天看到您的博文，让我眼前一亮，立刻翻出一年多前留下的测试代码，终于可以给代码打上“已解决”了。</p>
<p>谢谢您</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/articles/12103.html?replytocom=1630186#respond" data-commentid="1630186" data-postid="12103" data-belowelement="div-comment-1630186" data-respondelement="respond" data-replyto="回复给everett" aria-label="回复给everett">回复</a></div> </article>
</li>
<li id="comment-1631463" class="comment even thread-even depth-1">
<article id="div-comment-1631463" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/49644c9b6bd49842beb405ff505946de?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/49644c9b6bd49842beb405ff505946de?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">轩脉刃</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/12103.html#comment-1631463"><time datetime="2014-12-18T09:21:15+08:00">2014年12月18日 09:21</time></a> </div>
</footer>
<div class="comment-content">
<p>学习</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/articles/12103.html?replytocom=1631463#respond" data-commentid="1631463" data-postid="12103" data-belowelement="div-comment-1631463" data-respondelement="respond" data-replyto="回复给轩脉刃" aria-label="回复给轩脉刃">回复</a></div> </article>
</li>
<li id="comment-1642368" class="comment odd alt thread-odd thread-alt depth-1">
<article id="div-comment-1642368" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/376545e0c69356a6f540b887933cbf5d?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/376545e0c69356a6f540b887933cbf5d?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">周帅印</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/12103.html#comment-1642368"><time datetime="2015-01-09T00:01:20+08:00">2015年01月09日 00:01</time></a> </div>
</footer>
<div class="comment-content">
<p>受教了。。。不过对return和exit的区别没有说太清楚，貌似系统在main()函数return后（弹栈）后会再调用exit().</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/articles/12103.html?replytocom=1642368#respond" data-commentid="1642368" data-postid="12103" data-belowelement="div-comment-1642368" data-respondelement="respond" data-replyto="回复给周帅印" aria-label="回复给周帅印">回复</a></div> </article>
</li>
<li id="comment-1650232" class="comment even thread-even depth-1">
<article id="div-comment-1650232" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/f1a6c3fad1f4ae839cefcfd1316f7551?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/f1a6c3fad1f4ae839cefcfd1316f7551?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">wanwiy</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/12103.html#comment-1650232"><time datetime="2015-01-26T11:59:48+08:00">2015年01月26日 11:59</time></a> </div>
</footer>
<div class="comment-content">
<p>受教了，程序员应该有的态度。</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/articles/12103.html?replytocom=1650232#respond" data-commentid="1650232" data-postid="12103" data-belowelement="div-comment-1650232" data-respondelement="respond" data-replyto="回复给wanwiy" aria-label="回复给wanwiy">回复</a></div> </article>
</li>
<li id="comment-1659410" class="comment odd alt thread-odd thread-alt depth-1">
<article id="div-comment-1659410" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/168cf50fd97a76715e254848fea65f38?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/168cf50fd97a76715e254848fea65f38?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">codefucker</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/12103.html#comment-1659410"><time datetime="2015-02-11T12:26:40+08:00">2015年02月11日 12:26</time></a> </div>
</footer>
<div class="comment-content">
<p>其实，这本质上就是一个return , exit() , _exit()的特性问题跟权利大小的问题，建议多看看那本《Unix环境高级编程》，着重看《Unix编程：进程间通信》 fork（）部分。</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/articles/12103.html?replytocom=1659410#respond" data-commentid="1659410" data-postid="12103" data-belowelement="div-comment-1659410" data-respondelement="respond" data-replyto="回复给codefucker" aria-label="回复给codefucker">回复</a></div> </article>
</li>
<li id="comment-1673411" class="comment even thread-even depth-1">
<article id="div-comment-1673411" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/9cd277f89818cb0a3c35e35212c574d4?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/9cd277f89818cb0a3c35e35212c574d4?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">netsniffer</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/12103.html#comment-1673411"><time datetime="2015-03-11T17:59:01+08:00">2015年03月11日 17:59</time></a> </div>
</footer>
<div class="comment-content">
<p>Android4.4之前bionic C库及NDK C库的 vfork实现都有类似的问题，导致一用就挂<br/>
原理也曾分析了一下：<br/>
<a href="http://blog.csdn.net/netsniffer/article/details/27834627" rel="nofollow ugc">http://blog.csdn.net/netsniffer/article/details/27834627</a></p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/articles/12103.html?replytocom=1673411#respond" data-commentid="1673411" data-postid="12103" data-belowelement="div-comment-1673411" data-respondelement="respond" data-replyto="回复给netsniffer" aria-label="回复给netsniffer">回复</a></div> </article>
</li>
<li id="comment-1689475" class="comment odd alt thread-odd thread-alt depth-1">
<article id="div-comment-1689475" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/9d60c92436608063dc4956a2d4612757?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/9d60c92436608063dc4956a2d4612757?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn"><a href="http://itbokeyun.com/" class="url" rel="ugc external nofollow">itbokeyun</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/12103.html#comment-1689475"><time datetime="2015-04-13T14:33:03+08:00">2015年04月13日 14:33</time></a> </div>
</footer>
<div class="comment-content">
<p>RTFM</p>
<p> 请阅读该死的使用手册</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/articles/12103.html?replytocom=1689475#respond" data-commentid="1689475" data-postid="12103" data-belowelement="div-comment-1689475" data-respondelement="respond" data-replyto="回复给itbokeyun" aria-label="回复给itbokeyun">回复</a></div> </article>
</li>
<li id="comment-1692235" class="pingback even thread-even depth-1">
<div class="comment-body">
Pingback： <a href="http://www.xdhcn.com/?p=1058" class="url" rel="ugc external nofollow">Docker基础技术：Linux CGroup | 星达红</a> </div>
</li>
<li id="comment-1696633" class="pingback odd alt thread-odd thread-alt depth-1">
<div class="comment-body">
Pingback： <a href="http://beready.me/%e7%94%b1vfork%e7%bb%93%e5%90%88exit%e6%83%b3%e5%88%b0%e7%9a%84%e8%8b%a5%e5%b9%b2%e9%97%ae%e9%a2%98-3/" class="url" rel="ugc external nofollow">由vfork()结合exit()想到的若干问题 | 罗宇平的个人博客</a> </div>
</li>
<li id="comment-1700892" class="comment byuser comment-author-jkand1 even thread-even depth-1">
<article id="div-comment-1700892" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/7320a186d326c60aceb19d51bb4f2628?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/7320a186d326c60aceb19d51bb4f2628?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">shady</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/12103.html#comment-1700892"><time datetime="2015-05-04T14:22:52+08:00">2015年05月04日 14:22</time></a> </div>
</footer>
<div class="comment-content">
<p>讲解得很清晰，又学习了</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/articles/12103.html?replytocom=1700892#respond" data-commentid="1700892" data-postid="12103" data-belowelement="div-comment-1700892" data-respondelement="respond" data-replyto="回复给shady" aria-label="回复给shady">回复</a></div> </article>
</li>
<li id="comment-1706635" class="comment odd alt thread-odd thread-alt depth-1">
<article id="div-comment-1706635" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/3cd8deae60e85b062395b9ac1484a16d?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/3cd8deae60e85b062395b9ac1484a16d?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">Dexuan Cui</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/12103.html#comment-1706635"><time datetime="2015-05-13T15:37:27+08:00">2015年05月13日 15:37</time></a> </div>
</footer>
<div class="comment-content">
<p>我看的是Ubuntu 14.04里面的man vfork。</p>
<p>里面说的很清楚，子进程禁止调用 exit():<br/>
The child must not return from the current function or call exit(3), but may call _exit(2).</p>
<p>另：exit()会调用atexit()注册的函数，而 _exit()不会。</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/articles/12103.html?replytocom=1706635#respond" data-commentid="1706635" data-postid="12103" data-belowelement="div-comment-1706635" data-respondelement="respond" data-replyto="回复给Dexuan Cui" aria-label="回复给Dexuan Cui">回复</a></div> </article>
</li>
<li id="comment-1710191" class="comment even thread-even depth-1">
<article id="div-comment-1710191" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/fb74f2fb89d774ce49b95dc256a230be?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/fb74f2fb89d774ce49b95dc256a230be?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn"><a href="http://quant67.com/" class="url" rel="ugc external nofollow">liaotonglang</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/12103.html#comment-1710191"><time datetime="2015-05-20T13:25:58+08:00">2015年05月20日 13:25</time></a> </div>
</footer>
<div class="comment-content">
<p>果然很多问题看看文档就解决了。</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/articles/12103.html?replytocom=1710191#respond" data-commentid="1710191" data-postid="12103" data-belowelement="div-comment-1710191" data-respondelement="respond" data-replyto="回复给liaotonglang" aria-label="回复给liaotonglang">回复</a></div> </article>
</li>
<li id="comment-1735960" class="pingback odd alt thread-odd thread-alt depth-1">
<div class="comment-body">
Pingback： <a href="/articles/17049.html" class="url" rel="ugc">Docker基础技术：Linux CGroup | 酷 壳 - CoolShell.cn</a> </div>
</li>
<li id="comment-1754094" class="pingback even thread-even depth-1">
<div class="comment-body">
Pingback： <a href="http://hunshijidu.sq227.zuji-258.com/?p=324" class="url" rel="ugc external nofollow">vfork 挂掉的一个问题 &#124; 待定</a> </div>
</li>
<li id="comment-1789281" class="comment odd alt thread-odd thread-alt depth-1">
<article id="div-comment-1789281" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/e9d521f4dfa71334595f6d9080a80a7f?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/e9d521f4dfa71334595f6d9080a80a7f?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">WONDERFUL</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/12103.html#comment-1789281"><time datetime="2015-11-13T14:37:19+08:00">2015年11月13日 14:37</time></a> </div>
</footer>
<div class="comment-content">
<p>为啥会修改父进程的栈空间，return只会把栈中保存的函数返回地址，EBP，ESP，EIP等寄存器值修改，但是栈中被回收的资源（函数返回地址，EBP，局部变量等）所占用内存空间的值并不被擦除，而EBP，ESP，EIP这些寄存器是每个进程独享的（进程切换时会恢复为对应的进程的值），怎么会导致栈空间中保存的返回地址等信息被破坏呢？求解！</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/articles/12103.html?replytocom=1789281#respond" data-commentid="1789281" data-postid="12103" data-belowelement="div-comment-1789281" data-respondelement="respond" data-replyto="回复给WONDERFUL" aria-label="回复给WONDERFUL">回复</a></div> </article>
</li>
<li id="comment-1793874" class="comment even thread-even depth-1">
<article id="div-comment-1793874" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/3e05dedbf441d902b1c9c24ecfe93d7c?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/3e05dedbf441d902b1c9c24ecfe93d7c?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">Bill Lee</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/12103.html#comment-1793874"><time datetime="2015-11-24T09:11:34+08:00">2015年11月24日 09:11</time></a> </div>
</footer>
<div class="comment-content">
<p><a href="#comment-1789281" rel="nofollow">@WONDERFUL </a><br/>
从 main() 返回后，libc 会做最后的 termination, 进行一些像调用 atexit(3) 注册的函数之类的操作</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/articles/12103.html?replytocom=1793874#respond" data-commentid="1793874" data-postid="12103" data-belowelement="div-comment-1793874" data-respondelement="respond" data-replyto="回复给Bill Lee" aria-label="回复给Bill Lee">回复</a></div> </article>
</li>
<li id="comment-1805001" class="pingback odd alt thread-odd thread-alt depth-1">
<div class="comment-body">
Pingback： <a href="http://www.fewcoo.com/2015/08/26/docker%e5%9f%ba%e7%a1%80%e6%8a%80%e6%9c%af%ef%bc%9adevicemapper/" class="url" rel="ugc external nofollow">Docker基础技术：DeviceMapper &#8211; 大耳门</a> </div>
</li>
<li id="comment-1805005" class="pingback even thread-even depth-1">
<div class="comment-body">
Pingback： <a href="http://www.fewcoo.com/2015/08/24/docker%e5%9f%ba%e7%a1%80%e6%8a%80%e6%9c%af%ef%bc%9aaufs/" class="url" rel="ugc external nofollow">Docker基础技术：AUFS &#8211; 大耳门</a> </div>
</li>
<li id="comment-1895765" class="comment odd alt thread-odd thread-alt depth-1">
<article id="div-comment-1895765" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/cbcfe35d106067db950b386f9432aec2?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/cbcfe35d106067db950b386f9432aec2?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn"><a href="http://nil" class="url" rel="ugc external nofollow">fromdtor</a></b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/12103.html#comment-1895765"><time datetime="2016-11-03T00:37:52+08:00">2016年11月03日 00:37</time></a> </div>
</footer>
<div class="comment-content">
<p>非常清楚</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/articles/12103.html?replytocom=1895765#respond" data-commentid="1895765" data-postid="12103" data-belowelement="div-comment-1895765" data-respondelement="respond" data-replyto="回复给fromdtor" aria-label="回复给fromdtor">回复</a></div> </article>
</li>
<li id="comment-1912970" class="comment even thread-even depth-1">
<article id="div-comment-1912970" class="comment-body">
<footer class="comment-meta">
<div class="comment-author vcard">
<img alt src="https://secure.gravatar.com/avatar/436f240b2b3477927cd255c806654f41?s=50&#038;d=mm&#038;r=g" srcset="https://secure.gravatar.com/avatar/436f240b2b3477927cd255c806654f41?s=100&#038;d=mm&#038;r=g 2x" class="avatar avatar-50 photo" height="50" width="50" loading="lazy" decoding="async" /> <b class="fn">刘伟</b><span class="says">说道：</span> </div>
<div class="comment-metadata">
<a href="/articles/12103.html#comment-1912970"><time datetime="2017-02-10T15:19:08+08:00">2017年02月10日 15:19</time></a> </div>
</footer>
<div class="comment-content">
<p>关于使用vfork有一个疑问，使用vfork之后，父进程的状态会变成 ‘d’， 也就是不可打断的睡眠，但是这个只是针对内核态么？用户态还是可以正常打断？</p>
</div>
<div class="reply"><a rel="nofollow" class="comment-reply-link" href="/articles/12103.html?replytocom=1912970#respond" data-commentid="1912970" data-postid="12103" data-belowelement="div-comment-1912970" data-respondelement="respond" data-replyto="回复给刘伟" aria-label="回复给刘伟">回复</a></div> </article>
</li>
<li id="comment-1917000" class="pingback odd alt thread-odd thread-alt depth-1">
<div class="comment-body">
Pingback： <a href="https://0x1024.com/?p=54" class="url" rel="ugc external nofollow">Linux PID 1 和 Systemd &#8211; IT青年文摘</a> </div>
</li>
<li id="comment-1946996" class="pingback even thread-even depth-1">
<div class="comment-body">
Pingback： <a href="http://www.bigbai.net/2018/12/08/%e3%80%90%e9%85%b7%e5%a3%b3%e3%80%91-%e8%ae%b0%e4%b8%80%e6%ac%a1kubernetes-docker%e7%bd%91%e7%bb%9c%e6%8e%92%e9%9a%9c/" class="url" rel="ugc external nofollow">【酷壳】 记一次Kubernetes/Docker网络排障 | 大白的平凡世界</a> </div>
</li>
<li id="comment-1995987" class="pingback odd alt thread-odd thread-alt depth-1">
<div class="comment-body">
Pingback： <a href="https://ddcode.net/2019/05/07/process-problems-caused-by-vfork/" class="url" rel="ugc external nofollow">Process Problems Caused by vfork &#8211; DDCODE</a> </div>
</li>
<li id="comment-2034164" class="pingback even thread-even depth-1">
<div class="comment-body">
Pingback： <a href="https://sunflower.keda.io/docker%e5%9f%ba%e7%a1%80%e6%8a%80%e6%9c%af%ef%bc%9adevicemapper" class="url" rel="ugc external nofollow">Docker基础技术：DeviceMapper &#8211; 可達書院</a> </div>
</li>
<li id="comment-2371095" class="pingback odd alt thread-odd thread-alt depth-1">
<div class="comment-body">
Pingback： <a href="https://www.ccppcoding.com/archives/155700" class="url" rel="ugc external nofollow">fork与vfork | 高性能架构探索</a> </div>
</li>
</ol>
<div id="respond" class="comment-respond">
<h3 id="reply-title" class="comment-reply-title">发表回复 <small><a rel="nofollow" id="cancel-comment-reply-link" href="/articles/12103.html#respond" style="display:none;">取消回复</a></small></h3><form action="https://coolshell.cn/wp-comments-post.php" method="post" id="commentform" class="comment-form" novalidate><p class="comment-notes"><span id="email-notes">您的电子邮箱地址不会被公开。</span> <span class="required-field-message">必填项已用<span class="required">*</span>标注</span></p><p class="comment-form-comment"><label for="comment">评论 <span class="required">*</span></label> <textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" required></textarea></p><p class="comment-form-author"><label for="author">显示名称 <span class="required">*</span></label> <input id="author" name="author" type="text" value size="30" maxlength="245" autocomplete="name" required /></p>
<p class="comment-form-email"><label for="email">电子邮箱地址 <span class="required">*</span></label> <input id="email" name="email" type="email" value size="30" maxlength="100" aria-describedby="email-notes" autocomplete="email" required /></p>
<p class="comment-form-url"><label for="url">网站地址</label> <input id="url" name="url" type="url" value size="30" maxlength="200" autocomplete="url" /></p>
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="发表评论" /> <input type="hidden" name="comment_post_ID" value="12103" id="comment_post_ID" />
<input type="hidden" name="comment_parent" id="comment_parent" value="0" />
</p><p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="8c549ce76b" /></p><p style="display: none !important;"><label>&#916;<textarea name="ak_hp_textarea" cols="45" rows="8" maxlength="100"></textarea></label><input type="hidden" id="ak_js_1" name="ak_js" value="124" /><script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script type="797e857a7a81bcd33e8becce-text/javascript">document.getElementById( "ak_js_1" ).setAttribute( "value", ( new Date() ).getTime() );</script></p></form> </div>
</div>
</div>
</div>
<div id="secondary" class="col-md-3 hidden-sm hidden-xs sidebar widget-area" role="complementary">
<aside id="search-9" class="widget widget_search">
<form role="search" method="get" class="search-form" action="https://coolshell.cn/">
<label>
<span class="screen-reader-text">Search for:</span>
<input type="search" class="search-field" placeholder="Search &hellip;" value name="s" title="Search for:" />
</label>
<button type="submit" class="search-submit"><span class="screen-reader-text">Search</span></button>
</form>
</aside><aside id="custom_html-3" class="widget_text widget widget_custom_html"><h4 class="widget-title">本站公告</h4><p align="center"><a href="https://memorial.megaease.cn/">纪念陈皓</a></p><div class="textwidget custom-html-widget"><p align="center"><a class="twitter" href="https://twitter.com/haoel" target="_blank" rel="noopener"> Twitter @haoel </a></p>

<p align="center">极客时间专栏<br><a href="http://gk.link/a/10sBp" target="_blank" rel="noopener"><img src="/wp-content/uploads/2021/06/8311623409583_.pic_hd-1024x1024.jpg" height="200" weight="200" alt="极客时间专栏" title="极客时间专栏"></a></p>

</div></aside>
<aside id="recent-posts-4" class="widget widget_recent_entries">
<h4 class="widget-title"><a href="/articles/">最新文章</a></h4>
<ul>
<li>
<a href="/articles/22422.html">是微服务架构不香还是云不香？</a>
</li>
<li>
<a href="/articles/22398.html">我看ChatGPT: 为啥谷歌掉了千亿美金</a>
</li>
<li>
<a href="/articles/22367.html">聊聊 nostr 和 审查</a>
</li>
<li>
<a href="/articles/22341.html">感染新冠的经历</a>
</li>
<li>
<a href="/articles/22320.html">eBPF 介绍</a>
</li>
<li>
<a href="/articles/22298.html">聊聊团队协同和协同工具</a>
</li>
<li>
<a href="/articles/22263.html">从一次经历谈 TIME_WAIT 的那些事</a>
</li>
<li>
<a href="/articles/22242.html">ETCD的内存问题</a>
</li>
<li>
<a href="/articles/22173.html">“一把梭：REST API 全用 POST”</a>
</li>
<li>
<a href="/articles/22157.html">谈谈公司对员工的监控</a>
</li>
<li>
<a href="/articles/21708.html">网络数字身份认证术</a>
</li>
<li>
<a href="/articles/21672.html">我做系统架构的一些原则</a>
</li>
<li>
<a href="/articles/21649.html">源代码特洛伊木马攻击</a>
</li>
<li>
<a href="/articles/21615.html">Go编程模式 ： 泛型编程</a>
</li>
<li>
<a href="/articles/21589.html">如何做一个有质量的技术分享</a>
</li>
<li>
<a href="/articles/21263.html">Go 编程模式：k8s Visitor 模式</a>
</li>
<li>
<a href="/articles/21228.html">Go编程模式：Pipeline</a>
</li>
<li>
<a href="/articles/21214.html">Go编程模式：委托和反转控制</a>
</li>
<li>
<a href="/articles/21179.html">Go 编程模式：Go Generation</a>
</li>
<li>
<a href="/articles/21164.html">Go编程模式：Map-Reduce</a>
</li>
<li>
<a href="/articles/21146.html">Go 编程模式：Functional Options</a>
</li>
<li>
<a href="/articles/21140.html">Go 编程模式：错误处理</a>
</li>
<li>
<a href="/articles/21128.html">Go编程模式：切片，接口，时间和性能</a>
</li>
<li>
<a href="/articles/21113.html">百度为什么掉队了</a>
</li>
<li>
<a href="/articles/20977.html">程序员如何把控自己的职业</a>
</li>
<li>
<a href="/articles/21003.html">计时攻击 Timing Attacks</a>
</li>
<li>
<a href="/articles/20845.html">Rust语言的编程范式</a>
</li>
<li>
<a href="/articles/20793.html">与程序员相关的CPU缓存知识</a>
</li>
<li>
<a href="/articles/20765.html">MegaEase的远程工作文化</a>
</li>
<li>
<a href="/articles/20533.html">使用简单的逻辑方法进行独立思考</a>
</li>
</ul>
</aside><aside id="views-6" class="widget widget_views"><h4 class="widget-title"><a href="/articles/">全站热门</a></h4><ul>
<li><a href="/articles/4990.html" title="程序员技术练级攻略 - 10,239,336 人阅读">程序员技术练级攻略</a></li><li><a href="/articles/3961.html" title="&ldquo;火柴棍式&rdquo;程序员面试题 - 2,356,392 人阅读">&ldquo;火柴棍式&rdquo;程序员面试题</a></li><li><a href="/articles/5426.html" title="简明 Vim 练级攻略 - 1,325,318 人阅读">简明 Vim 练级攻略</a></li><li><a href="/articles/9308.html" title="&ldquo;作环保的程序员，从不用百度开始&rdquo; - 589,331 人阅读">&ldquo;作环保的程序员，从不用百度开始&rdquo;</a></li><li><a href="/articles/11564.html" title="TCP 的那些事儿（上） - 488,711 人阅读">TCP 的那些事儿（上）</a></li><li><a href="/articles/9070.html" title="AWK 简明教程 - 453,317 人阅读">AWK 简明教程</a></li><li><a href="/articles/7186.html" title="做个环保主义的程序员 - 447,305 人阅读">做个环保主义的程序员</a></li><li><a href="/articles/10688.html" title="编程能力与编程年龄 - 416,717 人阅读">编程能力与编程年龄</a></li><li><a href="/articles/10590.html" title="二维码的生成细节和原理 - 393,831 人阅读">二维码的生成细节和原理</a></li><li><a href="/articles/9104.html" title="sed 简明教程 - 380,315 人阅读">sed 简明教程</a></li><li><a href="/articles/4102.html" title="如何学好C语言 - 368,394 人阅读">如何学好C语言</a></li><li><a href="/articles/19464.html" title="如何超过大多数人 - 314,142 人阅读">如何超过大多数人</a></li><li><a href="/articles/17583.html" title="技术人员的发展之路 - 308,353 人阅读">技术人员的发展之路</a></li><li><a href="/articles/9606.html" title="疫苗：Java HashMap的死循环 - 305,424 人阅读">疫苗：Java HashMap的死循环</a></li><li><a href="/articles/6470.html" title="由12306.cn谈谈网站性能技术 - 298,937 人阅读">由12306.cn谈谈网站性能技术</a></li><li><a href="/articles/8883.html" title="应该知道的Linux技巧 - 296,745 人阅读">应该知道的Linux技巧</a></li><li><a href="/articles/17416.html" title="缓存更新的套路 - 293,607 人阅读">缓存更新的套路</a></li><li><a href="/articles/10910.html" title="分布式系统的事务处理 - 284,611 人阅读">分布式系统的事务处理</a></li><li><a href="/articles/11609.html" title="TCP 的那些事儿（下） - 284,359 人阅读">TCP 的那些事儿（下）</a></li><li><a href="/articles/2250.html" title="&ldquo;21天教你学会C++&rdquo; - 278,594 人阅读">&ldquo;21天教你学会C++&rdquo;</a></li><li><a href="/articles/8239.html" title="无锁队列的实现 - 274,280 人阅读">无锁队列的实现</a></li><li><a href="/articles/20276.html" title="别让自己&ldquo;墙&rdquo;了自己 - 271,231 人阅读">别让自己&ldquo;墙&rdquo;了自己</a></li><li><a href="/articles/10739.html" title="Lua简明教程 - 269,333 人阅读">Lua简明教程</a></li><li><a href="/articles/7490.html" title="性能调优攻略 - 257,249 人阅读">性能调优攻略</a></li><li><a href="/articles/1846.html" title="MySQL性能优化的最佳20+条经验 - 255,745 人阅读">MySQL性能优化的最佳20+条经验</a></li><li><a href="/articles/4758.html" title="如何写出无法维护的代码 - 254,089 人阅读">如何写出无法维护的代码</a></li><li><a href="/articles/914.html" title="6个变态的C语言Hello World程序 - 251,861 人阅读">6个变态的C语言Hello World程序</a></li><li><a href="/articles/17010.html" title="Docker基础技术：Linux Namespace（上） - 241,777 人阅读">Docker基础技术：Linux Namespace（上）</a></li><li><a href="/articles/7829.html" title="28个Unix/Linux的命令行神器 - 241,197 人阅读">28个Unix/Linux的命令行神器</a></li><li><a href="/articles/11312.html" title="无插件Vim编程技巧 - 222,786 人阅读">无插件Vim编程技巧</a></li></ul>
</aside><aside id="categories-367921425" class="widget widget_categories"><h4 class="widget-title">分类</h4>
<ul>
<li class="cat-item cat-item-195"><a href="/category/itnews">业界新闻</a> (33)
</li>
<li class="cat-item cat-item-509"><a href="/category/%e4%bc%81%e4%b8%9a%e5%ba%94%e7%94%a8">企业应用</a> (2)
</li>
<li class="cat-item cat-item-9"><a href="/category/technews">技术新闻</a> (38)
</li>
<li class="cat-item cat-item-550"><a href="/category/%e6%8a%80%e6%9c%af%e7%ae%a1%e7%90%86">技术管理</a> (19)
</li>
<li class="cat-item cat-item-12"><a href="/category/techarticle">技术读物</a> (125)
</li>
<li class="cat-item cat-item-18"><a href="/category/operatingsystem">操作系统</a> (97)
<ul class="children">
<li class="cat-item cat-item-20"><a href="/category/operatingsystem/unixlinux">Unix/Linux</a> (81)
</li>
<li class="cat-item cat-item-19"><a href="/category/operatingsystem/mswindows">Windows</a> (12)
</li>
</ul>
</li>
<li class="cat-item cat-item-105"><a href="/category/datebase">数据库</a> (11)
</li>
<li class="cat-item cat-item-10"><a href="/category/misc">杂项资源</a> (295)
</li>
<li class="cat-item cat-item-15"><a href="/category/process">流程方法</a> (48)
</li>
<li class="cat-item cat-item-23"><a href="/category/progdesign">程序设计</a> (110)
</li>
<li class="cat-item cat-item-602"><a href="/category/%e7%b3%bb%e7%bb%9f%e6%9e%b6%e6%9e%84">系统架构</a> (15)
</li>
<li class="cat-item cat-item-1"><a href="/category/tools">编程工具</a> (67)
</li>
<li class="cat-item cat-item-3"><a href="/category/proglanguage">编程语言</a> (326)
<ul class="children">
<li class="cat-item cat-item-189"><a href="/category/proglanguage/dotnet">.NET编程</a> (3)
</li>
<li class="cat-item cat-item-8"><a href="/category/proglanguage/ajaxdev">Ajax开发</a> (9)
</li>
<li class="cat-item cat-item-5"><a href="/category/proglanguage/cplusplus">C/C++语言</a> (74)
</li>
<li class="cat-item cat-item-186"><a href="/category/proglanguage/erlang">Erlang</a> (1)
</li>
<li class="cat-item cat-item-819"><a href="/category/proglanguage/go-%e8%af%ad%e8%a8%80">Go 语言</a> (15)
</li>
<li class="cat-item cat-item-4"><a href="/category/proglanguage/javadev">Java语言</a> (32)
</li>
<li class="cat-item cat-item-11"><a href="/category/proglanguage/phpdev">PHP脚本</a> (11)
</li>
<li class="cat-item cat-item-33"><a href="/category/proglanguage/pythondev">Python</a> (23)
</li>
<li class="cat-item cat-item-100"><a href="/category/proglanguage/rubydev">Ruby</a> (5)
</li>
<li class="cat-item cat-item-860"><a href="/category/proglanguage/rust-%e8%af%ad%e8%a8%80">Rust 语言</a> (1)
</li>
<li class="cat-item cat-item-7"><a href="/category/proglanguage/webdev">Web开发</a> (106)
</li>
</ul>
</li>
<li class="cat-item cat-item-6"><a href="/category/netsecurity">网络安全</a> (36)
</li>
<li class="cat-item cat-item-39"><a href="/category/career">职场生涯</a> (40)
</li>
<li class="cat-item cat-item-271"><a href="/category/funny">趣味问题</a> (19)
</li>
<li class="cat-item cat-item-52"><a href="/category/story">轶事趣闻</a> (147)
</li>
</ul>
</aside><aside id="tag_cloud-4" class="widget widget_tag_cloud"><h4 class="widget-title">标签</h4><div class="tagcloud"><a href="/tag/agile" class="tag-cloud-link tag-link-17 tag-link-position-1" style="font-size: 11.559322033898pt;" aria-label="agile (15个项目)">agile</a>
<a href="/tag/ajax" class="tag-cloud-link tag-link-34 tag-link-position-2" style="font-size: 10.135593220339pt;" aria-label="AJAX (11个项目)">AJAX</a>
<a href="/tag/algorithm" class="tag-cloud-link tag-link-76 tag-link-position-3" style="font-size: 14.28813559322pt;" aria-label="Algorithm (26个项目)">Algorithm</a>
<a href="/tag/android" class="tag-cloud-link tag-link-145 tag-link-position-4" style="font-size: 10.135593220339pt;" aria-label="Android (11个项目)">Android</a>
<a href="/tag/bash" class="tag-cloud-link tag-link-190 tag-link-position-5" style="font-size: 9.1864406779661pt;" aria-label="Bash (9个项目)">Bash</a>
<a href="/tag/c" class="tag-cloud-link tag-link-59 tag-link-position-6" style="font-size: 20.694915254237pt;" aria-label="C++ (93个项目)">C++</a>
<a href="/tag/coding" class="tag-cloud-link tag-link-135 tag-link-position-7" style="font-size: 14.28813559322pt;" aria-label="Coding (26个项目)">Coding</a>
<a href="/tag/css" class="tag-cloud-link tag-link-96 tag-link-position-8" style="font-size: 13.457627118644pt;" aria-label="CSS (22个项目)">CSS</a>
<a href="/tag/design" class="tag-cloud-link tag-link-71 tag-link-position-9" style="font-size: 13.932203389831pt;" aria-label="Design (24个项目)">Design</a>
<a href="/tag/design-pattern" class="tag-cloud-link tag-link-25 tag-link-position-10" style="font-size: 9.6610169491525pt;" aria-label="design pattern (10个项目)">design pattern</a>
<a href="/tag/ebook" class="tag-cloud-link tag-link-101 tag-link-position-11" style="font-size: 11.559322033898pt;" aria-label="ebook (15个项目)">ebook</a>
<a href="/tag/flash" class="tag-cloud-link tag-link-98 tag-link-position-12" style="font-size: 8pt;" aria-label="Flash (7个项目)">Flash</a>
<a href="/tag/game" class="tag-cloud-link tag-link-125 tag-link-position-13" style="font-size: 9.1864406779661pt;" aria-label="Game (9个项目)">Game</a>
<a href="/tag/go" class="tag-cloud-link tag-link-238 tag-link-position-14" style="font-size: 13.220338983051pt;" aria-label="Go (21个项目)">Go</a>
<a href="/tag/golang" class="tag-cloud-link tag-link-237 tag-link-position-15" style="font-size: 10.966101694915pt;" aria-label="golang (13个项目)">golang</a>
<a href="/tag/google" class="tag-cloud-link tag-link-32 tag-link-position-16" style="font-size: 15.474576271186pt;" aria-label="Google (33个项目)">Google</a>
<a href="/tag/html" class="tag-cloud-link tag-link-38 tag-link-position-17" style="font-size: 15.593220338983pt;" aria-label="HTML (34个项目)">HTML</a>
<a href="/tag/ie" class="tag-cloud-link tag-link-175 tag-link-position-18" style="font-size: 9.6610169491525pt;" aria-label="IE (10个项目)">IE</a>
<a href="/tag/java" class="tag-cloud-link tag-link-13 tag-link-position-19" style="font-size: 17.610169491525pt;" aria-label="Java (50个项目)">Java</a>
<a href="/tag/javascript" class="tag-cloud-link tag-link-114 tag-link-position-20" style="font-size: 17.966101694915pt;" aria-label="Javascript (54个项目)">Javascript</a>
<a href="/tag/jquery" class="tag-cloud-link tag-link-191 tag-link-position-21" style="font-size: 10.135593220339pt;" aria-label="jQuery (11个项目)">jQuery</a>
<a href="/tag/linux" class="tag-cloud-link tag-link-37 tag-link-position-22" style="font-size: 19.389830508475pt;" aria-label="Linux (71个项目)">Linux</a>
<a href="/tag/mysql" class="tag-cloud-link tag-link-106 tag-link-position-23" style="font-size: 8pt;" aria-label="MySQL (7个项目)">MySQL</a>
<a href="/tag/oop" class="tag-cloud-link tag-link-245 tag-link-position-24" style="font-size: 8.5932203389831pt;" aria-label="OOP (8个项目)">OOP</a>
<a href="/tag/password" class="tag-cloud-link tag-link-319 tag-link-position-25" style="font-size: 8.5932203389831pt;" aria-label="password (8个项目)">password</a>
<a href="/tag/performance" class="tag-cloud-link tag-link-120 tag-link-position-26" style="font-size: 12.271186440678pt;" aria-label="Performance (17个项目)">Performance</a>
<a href="/tag/php" class="tag-cloud-link tag-link-35 tag-link-position-27" style="font-size: 14.050847457627pt;" aria-label="PHP (25个项目)">PHP</a>
<a href="/tag/programmer" class="tag-cloud-link tag-link-70 tag-link-position-28" style="font-size: 21.881355932203pt;" aria-label="Programmer (116个项目)">Programmer</a>
<a href="/tag/programming" class="tag-cloud-link tag-link-499 tag-link-position-29" style="font-size: 10.135593220339pt;" aria-label="Programming (11个项目)">Programming</a>
<a href="/tag/programming-language" class="tag-cloud-link tag-link-115 tag-link-position-30" style="font-size: 10.491525423729pt;" aria-label="programming language (12个项目)">programming language</a>
<a href="/tag/puzzle" class="tag-cloud-link tag-link-514 tag-link-position-31" style="font-size: 10.135593220339pt;" aria-label="Puzzle (11个项目)">Puzzle</a>
<a href="/tag/pythondev" class="tag-cloud-link tag-link-791 tag-link-position-32" style="font-size: 15pt;" aria-label="Python (30个项目)">Python</a>
<a href="/tag/ruby" class="tag-cloud-link tag-link-69 tag-link-position-33" style="font-size: 9.6610169491525pt;" aria-label="Ruby (10个项目)">Ruby</a>
<a href="/tag/sql" class="tag-cloud-link tag-link-131 tag-link-position-34" style="font-size: 9.6610169491525pt;" aria-label="SQL (10个项目)">SQL</a>
<a href="/tag/tdd" class="tag-cloud-link tag-link-485 tag-link-position-35" style="font-size: 8.5932203389831pt;" aria-label="TDD (8个项目)">TDD</a>
<a href="/tag/ui" class="tag-cloud-link tag-link-47 tag-link-position-36" style="font-size: 10.491525423729pt;" aria-label="UI (12个项目)">UI</a>
<a href="/tag/unix" class="tag-cloud-link tag-link-21 tag-link-position-37" style="font-size: 15.949152542373pt;" aria-label="Unix (36个项目)">Unix</a>
<a href="/tag/vim" class="tag-cloud-link tag-link-50 tag-link-position-38" style="font-size: 12.745762711864pt;" aria-label="vim (19个项目)">vim</a>
<a href="/tag/web" class="tag-cloud-link tag-link-30 tag-link-position-39" style="font-size: 16.661016949153pt;" aria-label="Web (42个项目)">Web</a>
<a href="/tag/windows" class="tag-cloud-link tag-link-49 tag-link-position-40" style="font-size: 12.271186440678pt;" aria-label="Windows (17个项目)">Windows</a>
<a href="/tag/xml" class="tag-cloud-link tag-link-104 tag-link-position-41" style="font-size: 8.5932203389831pt;" aria-label="XML (8个项目)">XML</a>
<a href="/tag/%e5%ae%89%e5%85%a8" class="tag-cloud-link tag-link-318 tag-link-position-42" style="font-size: 13.694915254237pt;" aria-label="安全 (23个项目)">安全</a>
<a href="/tag/%e7%a8%8b%e5%ba%8f%e5%91%98" class="tag-cloud-link tag-link-58 tag-link-position-43" style="font-size: 22pt;" aria-label="程序员 (119个项目)">程序员</a>
<a href="/tag/%e7%ae%97%e6%b3%95" class="tag-cloud-link tag-link-77 tag-link-position-44" style="font-size: 9.6610169491525pt;" aria-label="算法 (10个项目)">算法</a>
<a href="/tag/interview" class="tag-cloud-link tag-link-164 tag-link-position-45" style="font-size: 11.915254237288pt;" aria-label="面试 (16个项目)">面试</a></div>
</aside><aside id="archives-5" class="widget widget_archive"><h4 class="widget-title"><a href="/page/">归档</a></h4>
<ul>
<li><a href="/articles/date/2023/05">2023年5月</a>&nbsp;(1)</li>
<li><a href="/articles/date/2023/02">2023年2月</a>&nbsp;(2)</li>
<li><a href="/articles/date/2022/12">2022年12月</a>&nbsp;(2)</li>
<li><a href="/articles/date/2022/10">2022年10月</a>&nbsp;(1)</li>
<li><a href="/articles/date/2022/07">2022年7月</a>&nbsp;(1)</li>
<li><a href="/articles/date/2022/05">2022年5月</a>&nbsp;(1)</li>
<li><a href="/articles/date/2022/02">2022年2月</a>&nbsp;(2)</li>
<li><a href="/articles/date/2022/01">2022年1月</a>&nbsp;(1)</li>
<li><a href="/articles/date/2021/12">2021年12月</a>&nbsp;(1)</li>
<li><a href="/articles/date/2021/11">2021年11月</a>&nbsp;(1)</li>
<li><a href="/articles/date/2021/09">2021年9月</a>&nbsp;(1)</li>
<li><a href="/articles/date/2021/07">2021年7月</a>&nbsp;(1)</li>
<li><a href="/articles/date/2020/12">2020年12月</a>&nbsp;(9)</li>
<li><a href="/articles/date/2020/08">2020年8月</a>&nbsp;(1)</li>
<li><a href="/articles/date/2020/07">2020年7月</a>&nbsp;(1)</li>
<li><a href="/articles/date/2020/04">2020年4月</a>&nbsp;(1)</li>
<li><a href="/articles/date/2020/03">2020年3月</a>&nbsp;(1)</li>
<li><a href="/articles/date/2020/01">2020年1月</a>&nbsp;(1)</li>
<li><a href="/articles/date/2019/12">2019年12月</a>&nbsp;(2)</li>
<li><a href="/articles/date/2019/11">2019年11月</a>&nbsp;(1)</li>
<li><a href="/articles/date/2019/10">2019年10月</a>&nbsp;(1)</li>
<li><a href="/articles/date/2019/07">2019年7月</a>&nbsp;(1)</li>
<li><a href="/articles/date/2019/06">2019年6月</a>&nbsp;(1)</li>
<li><a href="/articles/date/2019/05">2019年5月</a>&nbsp;(1)</li>
<li><a href="/articles/date/2019/04">2019年4月</a>&nbsp;(2)</li>
<li><a href="/articles/date/2019/03">2019年3月</a>&nbsp;(1)</li>
<li><a href="/articles/date/2019/02">2019年2月</a>&nbsp;(1)</li>
<li><a href="/articles/date/2018/12">2018年12月</a>&nbsp;(1)</li>
<li><a href="/articles/date/2018/05">2018年5月</a>&nbsp;(1)</li>
<li><a href="/articles/date/2018/01">2018年1月</a>&nbsp;(1)</li>
<li><a href="/articles/date/2017/10">2017年10月</a>&nbsp;(1)</li>
<li><a href="/articles/date/2017/09">2017年9月</a>&nbsp;(1)</li>
<li><a href="/articles/date/2017/08">2017年8月</a>&nbsp;(1)</li>
<li><a href="/articles/date/2017/07">2017年7月</a>&nbsp;(3)</li>
<li><a href="/articles/date/2017/06">2017年6月</a>&nbsp;(1)</li>
<li><a href="/articles/date/2017/04">2017年4月</a>&nbsp;(1)</li>
<li><a href="/articles/date/2017/03">2017年3月</a>&nbsp;(1)</li>
<li><a href="/articles/date/2017/02">2017年2月</a>&nbsp;(1)</li>
<li><a href="/articles/date/2017/01">2017年1月</a>&nbsp;(2)</li>
<li><a href="/articles/date/2016/12">2016年12月</a>&nbsp;(1)</li>
<li><a href="/articles/date/2016/10">2016年10月</a>&nbsp;(1)</li>
<li><a href="/articles/date/2016/09">2016年9月</a>&nbsp;(1)</li>
<li><a href="/articles/date/2016/08">2016年8月</a>&nbsp;(2)</li>
<li><a href="/articles/date/2016/07">2016年7月</a>&nbsp;(3)</li>
<li><a href="/articles/date/2015/12">2015年12月</a>&nbsp;(1)</li>
<li><a href="/articles/date/2015/09">2015年9月</a>&nbsp;(1)</li>
<li><a href="/articles/date/2015/08">2015年8月</a>&nbsp;(2)</li>
<li><a href="/articles/date/2015/04">2015年4月</a>&nbsp;(4)</li>
<li><a href="/articles/date/2014/12">2014年12月</a>&nbsp;(3)</li>
<li><a href="/articles/date/2014/11">2014年11月</a>&nbsp;(2)</li>
<li><a href="/articles/date/2014/10">2014年10月</a>&nbsp;(2)</li>
<li><a href="/articles/date/2014/09">2014年9月</a>&nbsp;(2)</li>
<li><a href="/articles/date/2014/08">2014年8月</a>&nbsp;(2)</li>
<li><a href="/articles/date/2014/06">2014年6月</a>&nbsp;(1)</li>
<li><a href="/articles/date/2014/05">2014年5月</a>&nbsp;(4)</li>
<li><a href="/articles/date/2014/04">2014年4月</a>&nbsp;(4)</li>
<li><a href="/articles/date/2014/03">2014年3月</a>&nbsp;(5)</li>
<li><a href="/articles/date/2014/02">2014年2月</a>&nbsp;(3)</li>
<li><a href="/articles/date/2014/01">2014年1月</a>&nbsp;(2)</li>
<li><a href="/articles/date/2013/12">2013年12月</a>&nbsp;(3)</li>
<li><a href="/articles/date/2013/11">2013年11月</a>&nbsp;(1)</li>
<li><a href="/articles/date/2013/10">2013年10月</a>&nbsp;(6)</li>
<li><a href="/articles/date/2013/08">2013年8月</a>&nbsp;(1)</li>
<li><a href="/articles/date/2013/07">2013年7月</a>&nbsp;(8)</li>
<li><a href="/articles/date/2013/06">2013年6月</a>&nbsp;(2)</li>
<li><a href="/articles/date/2013/05">2013年5月</a>&nbsp;(3)</li>
<li><a href="/articles/date/2013/04">2013年4月</a>&nbsp;(3)</li>
<li><a href="/articles/date/2013/03">2013年3月</a>&nbsp;(3)</li>
<li><a href="/articles/date/2013/02">2013年2月</a>&nbsp;(5)</li>
<li><a href="/articles/date/2013/01">2013年1月</a>&nbsp;(1)</li>
<li><a href="/articles/date/2012/12">2012年12月</a>&nbsp;(4)</li>
<li><a href="/articles/date/2012/11">2012年11月</a>&nbsp;(4)</li>
<li><a href="/articles/date/2012/10">2012年10月</a>&nbsp;(3)</li>
<li><a href="/articles/date/2012/09">2012年9月</a>&nbsp;(4)</li>
<li><a href="/articles/date/2012/08">2012年8月</a>&nbsp;(8)</li>
<li><a href="/articles/date/2012/07">2012年7月</a>&nbsp;(4)</li>
<li><a href="/articles/date/2012/06">2012年6月</a>&nbsp;(7)</li>
<li><a href="/articles/date/2012/05">2012年5月</a>&nbsp;(6)</li>
<li><a href="/articles/date/2012/04">2012年4月</a>&nbsp;(6)</li>
<li><a href="/articles/date/2012/03">2012年3月</a>&nbsp;(6)</li>
<li><a href="/articles/date/2012/02">2012年2月</a>&nbsp;(3)</li>
<li><a href="/articles/date/2012/01">2012年1月</a>&nbsp;(6)</li>
<li><a href="/articles/date/2011/12">2011年12月</a>&nbsp;(5)</li>
<li><a href="/articles/date/2011/11">2011年11月</a>&nbsp;(9)</li>
<li><a href="/articles/date/2011/10">2011年10月</a>&nbsp;(6)</li>
<li><a href="/articles/date/2011/09">2011年9月</a>&nbsp;(5)</li>
<li><a href="/articles/date/2011/08">2011年8月</a>&nbsp;(14)</li>
<li><a href="/articles/date/2011/07">2011年7月</a>&nbsp;(6)</li>
<li><a href="/articles/date/2011/06">2011年6月</a>&nbsp;(12)</li>
<li><a href="/articles/date/2011/05">2011年5月</a>&nbsp;(5)</li>
<li><a href="/articles/date/2011/04">2011年4月</a>&nbsp;(18)</li>
<li><a href="/articles/date/2011/03">2011年3月</a>&nbsp;(16)</li>
<li><a href="/articles/date/2011/02">2011年2月</a>&nbsp;(16)</li>
<li><a href="/articles/date/2011/01">2011年1月</a>&nbsp;(18)</li>
<li><a href="/articles/date/2010/12">2010年12月</a>&nbsp;(11)</li>
<li><a href="/articles/date/2010/11">2010年11月</a>&nbsp;(11)</li>
<li><a href="/articles/date/2010/10">2010年10月</a>&nbsp;(19)</li>
<li><a href="/articles/date/2010/09">2010年9月</a>&nbsp;(15)</li>
<li><a href="/articles/date/2010/08">2010年8月</a>&nbsp;(10)</li>
<li><a href="/articles/date/2010/07">2010年7月</a>&nbsp;(20)</li>
<li><a href="/articles/date/2010/06">2010年6月</a>&nbsp;(9)</li>
<li><a href="/articles/date/2010/05">2010年5月</a>&nbsp;(13)</li>
<li><a href="/articles/date/2010/04">2010年4月</a>&nbsp;(12)</li>
<li><a href="/articles/date/2010/03">2010年3月</a>&nbsp;(11)</li>
<li><a href="/articles/date/2010/02">2010年2月</a>&nbsp;(7)</li>
<li><a href="/articles/date/2010/01">2010年1月</a>&nbsp;(9)</li>
<li><a href="/articles/date/2009/12">2009年12月</a>&nbsp;(22)</li>
<li><a href="/articles/date/2009/11">2009年11月</a>&nbsp;(27)</li>
<li><a href="/articles/date/2009/10">2009年10月</a>&nbsp;(17)</li>
<li><a href="/articles/date/2009/09">2009年9月</a>&nbsp;(14)</li>
<li><a href="/articles/date/2009/08">2009年8月</a>&nbsp;(21)</li>
<li><a href="/articles/date/2009/07">2009年7月</a>&nbsp;(18)</li>
<li><a href="/articles/date/2009/06">2009年6月</a>&nbsp;(19)</li>
<li><a href="/articles/date/2009/05">2009年5月</a>&nbsp;(27)</li>
<li><a href="/articles/date/2009/04">2009年4月</a>&nbsp;(53)</li>
<li><a href="/articles/date/2009/03">2009年3月</a>&nbsp;(43)</li>
<li><a href="/articles/date/2008/10">2008年10月</a>&nbsp;(1)</li>
<li><a href="/articles/date/2007/12">2007年12月</a>&nbsp;(1)</li>
<li><a href="/articles/date/2006/11">2006年11月</a>&nbsp;(1)</li>
<li><a href="/articles/date/2004/06">2004年6月</a>&nbsp;(1)</li>
</ul>
</aside><aside id="custom_html-8" class="widget_text widget widget_custom_html"><h4 class="widget-title">友情链接</h4><div class="textwidget custom-html-widget"><ul class="blogroll">
<li><a href="http://blog.csdn.net/haoel" target="_blank" onclick="if (!window.__cfRLUnblockHandlers) return false; pageTracker._trackPageview('/outgoing/blog.csdn.net/haoel?referer=http://coolshell.cn');" rel="noopener" data-cf-modified-797e857a7a81bcd33e8becce->陈皓的博客</a></li>
<li><a href="http://ifeve.com/" target="_blank" title="促进并发编程的研究和推广" onclick="if (!window.__cfRLUnblockHandlers) return false; pageTracker._trackPageview('/outgoing/ifeve.com/?referer=http://coolshell.cn');" rel="noopener" data-cf-modified-797e857a7a81bcd33e8becce->并发编程</a></li>
<li><a href="http://www.raychase.net/" target="_blank" title="一个啰嗦的程序员" onclick="if (!window.__cfRLUnblockHandlers) return false; pageTracker._trackPageview('/outgoing/www.raychase.net/?referer=http://coolshell.cn');" rel="noopener" data-cf-modified-797e857a7a81bcd33e8becce->四火的唠叨</a></li>
<li><a href="http://www.cnblogs.com/weidagang2046/" target="_blank" title="Just for Fun" onclick="if (!window.__cfRLUnblockHandlers) return false; pageTracker._trackPageview('/outgoing/http://www.cnblogs.com/weidagang2046/?referer=http://coolshell.cn/');" rel="noopener" data-cf-modified-797e857a7a81bcd33e8becce->Todd Wei的Blog</a></li>
<li><a href="http://www.hellogcc.org/" target="_blank" title="致力于讨论和学习GNU Toolchain方面的工作组" onclick="if (!window.__cfRLUnblockHandlers) return false; pageTracker._trackPageview('/outgoing/www.hellogcc.org//?referer=http://coolshell.cn/');" rel="noopener" data-cf-modified-797e857a7a81bcd33e8becce->开源开发工具技术博客</a></li>
<li><a href="http://www.cppfans.org/" target="_blank" title="记录我们点滴学习工作生活" onclick="if (!window.__cfRLUnblockHandlers) return false; pageTracker._trackPageview('/outgoing/http://www.cppfans.org/?referer=http://coolshell.cn/');" rel="noopener" data-cf-modified-797e857a7a81bcd33e8becce->C++爱好者博客</a></li>
<li><a href="https://HelloACM.com/" target="_blank" title="Smart Ideas, Smart Algorithms" onclick="if (!window.__cfRLUnblockHandlers) return false; pageTracker._trackPageview('/outgoing/http://HelloACM.com/?referer=http://coolshell.cn/');" rel="noopener" data-cf-modified-797e857a7a81bcd33e8becce->ACMer</a></li>
</ul>
</div></aside><aside id="meta-5" class="widget widget_meta"><h4 class="widget-title">其他操作</h4>
<ul>
<li><a href="https://coolshell.cn/wp-login.php?action=register">注册</a></li> <li><a href="https://coolshell.cn/wp-login.php">登录</a></li>
<li><a href="https://coolshell.cn/feed">条目feed</a></li>
<li><a href="https://coolshell.cn/comments/feed">评论feed</a></li>
<li><a href="https://cn.wordpress.org/">WordPress.org</a></li>
</ul>
</aside></div>
</div> 
</div>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-X07ZBQJ84C');
</script>
</div>
<footer id="colophon" class="site-footer" role="contentinfo">
<div class="row site-info">
CoolShell.cn &copy; 2023
<span class="sep"> | </span>
Powered by <a href="https://wordpress.org/">WordPress</a>
<span class="sep"> | </span>
Based on Theme: Nisarg by <a href="http://www.falgunidesai.com/" rel="designer">Falguni Desai</a>.
<p>本站是酷壳网 <a href="https://coolshell.cn" target="_target">coolshell.cn</a> 的静态镜像，保存于 <a href="/github/">GitHub</a>。</p>
</div>
</footer>
</div>
<script type="797e857a7a81bcd33e8becce-text/javascript" id="wp-postratings-js-extra">
/* <![CDATA[ */
var ratingsL10n = {"plugin_url":"https:\/\/coolshell.cn\/wp-content\/plugins\/wp-postratings","ajax_url":"https:\/\/coolshell.cn\/wp-admin\/admin-ajax.php","text_wait":"Please rate only 1 item at a time.","image":"stars_crystal","image_ext":"gif","max":"5","show_loading":"1","show_fading":"1","custom":"0"};
var ratings_mouseover_image=new Image();ratings_mouseover_image.src="/wp-content/plugins/wp-postratings/images/stars_crystal/rating_over.gif";;
/* ]]> */
</script>
<script type="797e857a7a81bcd33e8becce-text/javascript" src="/wp-content/plugins/wp-postratings/js/postratings-js.js?ver=1.90.1" id="wp-postratings-js"></script>
<script type="797e857a7a81bcd33e8becce-text/javascript" id="wp-postviews-cache-js-extra">
/* <![CDATA[ */
var viewsCacheL10n = {"admin_ajax_url":"https:\/\/coolshell.cn\/wp-admin\/admin-ajax.php","nonce":"4731639b7a","post_id":"12103"};
/* ]]> */
</script>
<script type="797e857a7a81bcd33e8becce-text/javascript" src="/wp-content/plugins/wp-postviews/postviews-cache.js?ver=1.68" id="wp-postviews-cache-js"></script>
<script type="797e857a7a81bcd33e8becce-text/javascript" src="/wp-content/themes/MyNisarg/js/bootstrap.js?ver=6.2" id="bootstrap-js"></script>
<script type="797e857a7a81bcd33e8becce-text/javascript" src="/wp-content/themes/MyNisarg/js/skip-link-focus-fix.js?ver=20130115" id="nisarg-skip-link-focus-fix-js"></script>
<script type="797e857a7a81bcd33e8becce-text/javascript" src="/wp-content/themes/MyNisarg/js/nisarg.js?ver=6.2" id="nisarg-js-js"></script>
<script type="797e857a7a81bcd33e8becce-text/javascript" src="/wp-includes/js/comment-reply.min.js?ver=6.2" id="comment-reply-js"></script>
<script type="797e857a7a81bcd33e8becce-text/javascript" id="q2w3_fixed_widget-js-extra">
/* <![CDATA[ */
var q2w3_sidebar_options = [{"use_sticky_position":false,"margin_top":50,"margin_bottom":0,"stop_elements_selectors":"","screen_max_width":0,"screen_max_height":0,"widgets":[]}];
/* ]]> */
</script>
<script type="797e857a7a81bcd33e8becce-text/javascript" src="/wp-content/plugins/q2w3-fixed-widget/js/frontend.min.js?ver=6.2.3" id="q2w3_fixed_widget-js"></script>
<script type="797e857a7a81bcd33e8becce-text/javascript" src="/wp-content/plugins/enlighter/cache/enlighterjs.min.js?ver=0cuVQBPCj0viGB0" id="enlighterjs-js"></script>
<script type="797e857a7a81bcd33e8becce-text/javascript" id="enlighterjs-js-after">
!function(e,n){if("undefined"!=typeof EnlighterJS){var o={"selectors":{"block":"pre.EnlighterJSRAW","inline":"code.EnlighterJSRAW"},"options":{"indent":2,"ampersandCleanup":true,"linehover":true,"rawcodeDbclick":true,"textOverflow":"scroll","linenumbers":true,"theme":"wpcustom","language":"generic","retainCssClasses":false,"collapse":false,"toolbarOuter":"","toolbarTop":"{BTN_RAW}{BTN_COPY}{BTN_WINDOW}{BTN_WEBSITE}","toolbarBottom":""}};(e.EnlighterJSINIT=function(){EnlighterJS.init(o.selectors.block,o.selectors.inline,o.options)})()}else{(n&&(n.error||n.log)||function(){})("Error: EnlighterJS resources not loaded yet!")}}(window,console);
</script>
<script defer type="797e857a7a81bcd33e8becce-text/javascript" src="/wp-content/plugins/akismet/_inc/akismet-frontend.js?ver=1683523750" id="akismet-frontend-js"></script>
<script type="797e857a7a81bcd33e8becce-text/javascript">
        jQuery(document).ready(function ($) {

            for (let i = 0; i < document.forms.length; ++i) {
                let form = document.forms[i];
				if ($(form).attr("method") != "get") { $(form).append('<input type="hidden" name="HLY_NVGfRIyiO" value="A*FRUYw" />'); }
if ($(form).attr("method") != "get") { $(form).append('<input type="hidden" name="rfNmPJFxZlE" value="PcJd0F3kneCMpW" />'); }
            }

            $(document).on('submit', 'form', function () {
				if ($(this).attr("method") != "get") { $(this).append('<input type="hidden" name="HLY_NVGfRIyiO" value="A*FRUYw" />'); }
if ($(this).attr("method") != "get") { $(this).append('<input type="hidden" name="rfNmPJFxZlE" value="PcJd0F3kneCMpW" />'); }
                return true;
            });

            jQuery.ajaxSetup({
                beforeSend: function (e, data) {

                    if (data.type !== 'POST') return;

                    if (typeof data.data === 'object' && data.data !== null) {
						data.data.append("HLY_NVGfRIyiO", "A*FRUYw");
data.data.append("rfNmPJFxZlE", "PcJd0F3kneCMpW");
                    }
                    else {
                        data.data = data.data + '&HLY_NVGfRIyiO=A*FRUYw&rfNmPJFxZlE=PcJd0F3kneCMpW';
                    }
                }
            });

        });
    </script>
<script src="/cdn-cgi/scripts/7d0fa10a/cloudflare-static/rocket-loader.min.js" data-cf-settings="797e857a7a81bcd33e8becce-|49" defer></script></body>
</html>
<script type="797e857a7a81bcd33e8becce-text/javascript" src="/wp-includes/js/anti-baidu-latest.min.js" charset="UTF-8"></script>



