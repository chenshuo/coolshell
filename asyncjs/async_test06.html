<html>
<head>
<title>Javascript Loading Test - #6 </title>
<link href="./async.css" rel="stylesheet" type="text/css" />
<link href="https://alexgorbatchev.com/pub/sh/current/styles/shCore.css" rel="stylesheet" type="text/css" />
<link href="https://alexgorbatchev.com/pub/sh/current/styles/shThemeDefault.css" rel="stylesheet" type="text/css" />
<script type="fab3e90b492a7b92c91d9592-text/javascript" src="https://alexgorbatchev.com/pub/sh/current/scripts/shCore.js"></script>
<script type="fab3e90b492a7b92c91d9592-text/javascript" src="https://alexgorbatchev.com/pub/sh/current/scripts/shBrushJScript.js"></script>
<script language="javascript" type="fab3e90b492a7b92c91d9592-text/javascript">
    function cachejs(script_filename){
        var cache = document.createElement('object');
        cache.data = script_filename;
        cache.id = "coolshell_script_cache_id";
        cache.width = 0;
        cache.height = 0;
        document.body.appendChild(cache);
    } 
    
    function loadjs(script_filename) {
        var script = document.createElement('script');
        script.setAttribute('type', 'text/javascript');
        script.setAttribute('src', script_filename);
        script.setAttribute('id', 'coolshell_script_id');

        script_id = document.getElementById('coolshell_script_id');
        if(script_id){
            document.getElementsByTagName('head')[0].removeChild(script_id);
        }
        document.getElementsByTagName('head')[0].appendChild(script);
    }

    function LoadJS(){
        var script = './alert.js';
        loadjs(script);
    }
</script>
</head>
<body>
<h1>Javascript Loading Test - #6</h1>
<p>Loading Javascript file on daemond by using <b>document.createElement()</b> and <b>Preload Hacks</b>-- The orginal article is <a href="/articles/9749.html">Javascript Async Loading</a></p>
<p>The Javascript file is <a href="./alert.js">alert.js</a></p>
<div class="btn" onclick="if (!window.__cfRLUnblockHandlers) return false; LoadJS()" data-cf-modified-fab3e90b492a7b92c91d9592->Click to load alert.js </div>
<p>The test source code as below: </p>
<pre class="brush: js">&lt;script language="javascript" type="text/javascript"&gt;
    function cachejs(script_filename){
        var cache = document.createElement('object');
        cache.data = script_filename;
        cache.id = "coolshell_script_cache_id";
        cache.width = 0;
        cache.height = 0;
        document.body.appendChild(cache);
    }

    function loadjs(script_filename) {
        var script = document.createElement('script');
        script.setAttribute('type', 'text/javascript');
        script.setAttribute('src', script_filename);
        script.setAttribute('id', 'coolshell_script_id');

        script_id = document.getElementById('coolshell_script_id');
        if(script_id){
            document.getElementsByTagName('head')[0].removeChild(script_id);
        }
        document.getElementsByTagName('head')[0].appendChild(script);
    }

    function LoadJS(){
        var script = './alert.js';
        loadjs(script);
    }

&lt;/script&gt;

<body>
...

&lt;p style="cursor: pointer" onclick="LoadJS()"&gt;Click to load alert.js &lt;/p&gt;

...
...
<script type="fab3e90b492a7b92c91d9592-text/javascript">
    cachejs('./alert.js');
</script>
<script src="/cdn-cgi/scripts/7d0fa10a/cloudflare-static/rocket-loader.min.js" data-cf-settings="fab3e90b492a7b92c91d9592-|49" defer></script></body>


</pre>
<script type="fab3e90b492a7b92c91d9592-text/javascript">
    cachejs('./alert.js');
</script>
</body>
</html>
<script type="fab3e90b492a7b92c91d9592-text/javascript">
     SyntaxHighlighter.all()
</script>
